<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE pdf2xml SYSTEM "pdf2xml.dtd">

<pdf2xml producer="poppler" version="0.30.0">
<page number="1" position="absolute" top="0" left="0" height="1262" width="892">
	<fontspec id="0" size="12" family="Times" color="#000000"/>
	<fontspec id="1" size="9" family="Times" color="#000000"/>
	<fontspec id="2" size="34" family="Times" color="#000000"/>
	<fontspec id="3" size="12" family="Times" color="#000000"/>
	<fontspec id="4" size="19" family="Times" color="#000000"/>
	<fontspec id="5" size="9" family="Times" color="#00004c"/>
	<fontspec id="6" size="12" family="Times" color="#00004c"/>
	<fontspec id="7" size="12" family="Times" color="#00004c"/>
	<fontspec id="8" size="11" family="Times" color="#000000"/>
	<fontspec id="9" size="6" family="Times" color="#000000"/>
<text top="67" left="82" width="15" height="15" font="0">40</text>
<text top="67" left="562" width="11" height="15" font="0">C</text>
<text top="69" left="573" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="67" left="664" width="10" height="15" font="0">R</text>
<text top="69" left="674" width="61" height="12" font="1">ESEARCH</text>
<text top="67" left="740" width="12" height="15" font="0">A</text>
<text top="69" left="752" width="53" height="12" font="1">RTICLES</text>
<text top="121" left="82" width="723" height="36" font="2"><b>Using the Google Visualisation API with R</b></text>
<text top="173" left="82" width="259" height="15" font="0">by Markus Gesmann and Diego de Castillo</text>
<text top="208" left="96" width="57" height="15" font="3"><b>Abstract</b></text>
<text top="208" left="169" width="246" height="15" font="0">The <b>googleVis </b>package provides an</text>
<text top="226" left="96" width="321" height="15" font="0">interface between R and the Google Visualisa-</text>
<text top="244" left="96" width="319" height="15" font="0">tion API to create interactive charts which can be</text>
<text top="262" left="96" width="319" height="15" font="0">embedded into web pages. The best known of</text>
<text top="279" left="96" width="321" height="15" font="0">these charts is probably the Motion Chart, popu-</text>
<text top="297" left="96" width="319" height="15" font="0">larised by Hans Rosling in his TED talks. With the</text>
<text top="315" left="96" width="68" height="15" font="3"><b>googleVis</b></text>
<text top="315" left="169" width="246" height="15" font="0">package users can easily create web</text>
<text top="333" left="96" width="319" height="15" font="0">pages with interactive charts based on R data</text>
<text top="351" left="96" width="319" height="15" font="0">frames and display them either via the local R</text>
<text top="369" left="96" width="287" height="15" font="0">HTTP help server or within their own sites.</text>
<text top="418" left="82" width="110" height="21" font="4"><b>Motivation</b></text>
<text top="458" left="82" width="341" height="15" font="0">In 2006 Hans Rosling gave an inspiring talk at <a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#1">TED</a></text>
<text top="455" left="423" width="6" height="11" font="5"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#1">1</a></text>
<text top="476" left="82" width="346" height="15" font="0">about social and economic developments in the world</text>
<text top="494" left="82" width="346" height="15" font="0">over the past 50 years, which challenged the views</text>
<text top="512" left="82" width="346" height="15" font="0">and perceptions of many listeners. Rosling had used</text>
<text top="530" left="82" width="346" height="15" font="0">extensive data analysis to reach his conclusions. To</text>
<text top="548" left="82" width="269" height="15" font="0">visualise his talk, he and his colleagues at</text>
<text top="548" left="354" width="75" height="15" font="6"><a href="http://www.gapminder.org">Gapminder</a></text>
<text top="566" left="82" width="332" height="15" font="0">had developed animated bubble charts, see Figure</text>
<text top="566" left="418" width="7" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#2">1</a></text>
<text top="566" left="426" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#2">.</a></text>
<text top="584" left="105" width="324" height="15" font="0">Rosling’s presentation popularised the idea and</text>
<text top="602" left="82" width="346" height="15" font="0">use of interactive charts, and as a result the software</text>
<text top="620" left="82" width="349" height="15" font="0">behind Gapminder was bought by Google and inte-</text>
<text top="638" left="82" width="221" height="15" font="0">grated as motion charts into their</text>
<text top="638" left="307" width="116" height="15" font="6"><a href="http://code.google.com/apis/visualization/documentation/index.html">Visualisation API</a></text>
<text top="635" left="423" width="6" height="11" font="5"><a href="http://code.google.com/apis/visualization/documentation/index.html">2</a></text>
<text top="656" left="82" width="93" height="15" font="0">one year later.</text>
<text top="675" left="105" width="211" height="15" font="0">In 2010 Sebastián Pérez Saaibi <a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">(</a></text>
<text top="675" left="316" width="41" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">Saaibi</a></text>
<text top="675" left="357" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">,</a></text>
<text top="675" left="365" width="30" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">2010</a></text>
<text top="675" left="395" width="36" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">) </a>pre-</text>
<text top="693" left="82" width="349" height="15" font="0">sented at the R/Rmetrics Workshop on Computa-</text>
<text top="711" left="82" width="346" height="15" font="0">tional Finance and Financial Engineering the idea to</text>
<text top="728" left="82" width="346" height="15" font="0">use Google motion charts to visualise R output with</text>
<text top="746" left="82" width="21" height="15" font="0">the</text>
<text top="746" left="107" width="22" height="15" font="7"><a href="http://cran.r-project.org/package=rsp"><b>rsp</b></a></text>
<text top="746" left="132" width="63" height="15" font="0">package <a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">(</a></text>
<text top="746" left="195" width="68" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">Bengtsson</a></text>
<text top="746" left="263" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">,</a></text>
<text top="746" left="270" width="30" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">2011</a></text>
<text top="746" left="300" width="9" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">).</a></text>
<text top="765" left="105" width="327" height="15" font="0">Inspired by those talks and the desire to use inter-</text>
<text top="783" left="82" width="346" height="15" font="0">active data visualisation tools to foster the dialogue</text>
<text top="801" left="82" width="346" height="15" font="0">between data analysts and others, the authors of this</text>
<text top="819" left="82" width="239" height="15" font="0">article started the development of the</text>
<text top="819" left="325" width="68" height="15" font="7"><a href="http://cran.r-project.org/package=googleVis"><b>googleVis</b></a></text>
<text top="819" left="396" width="36" height="15" font="0">pack-</text>
<text top="837" left="82" width="32" height="15" font="0">age <a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">(</a></text>
<text top="837" left="114" width="166" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">Gesmann and de Castillo</a></text>
<text top="837" left="280" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">,</a></text>
<text top="837" left="288" width="30" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">2011</a></text>
<text top="837" left="318" width="9" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">).</a></text>
<text top="888" left="82" width="251" height="21" font="4"><b>Google Visualisation API</b></text>
<text top="928" left="82" width="349" height="15" font="0">The Google Visualisation API allows users to create in-</text>
<text top="946" left="82" width="349" height="15" font="0">teractive charts as part of Google documents, spread-</text>
<text top="964" left="82" width="346" height="15" font="0">sheets and web pages. This text will focus on the</text>
<text top="982" left="82" width="243" height="15" font="0">usage of the API as part of web sites.</text>
<text top="1000" left="105" width="26" height="15" font="0">The</text>
<text top="1000" left="137" width="201" height="15" font="6"><a href="http://www.google.com/publicdata/home">Google Public Data Explorer</a></text>
<text top="1000" left="345" width="5" height="15" font="0"><a href="http://www.google.com/publicdata/home">(</a></text>
<text top="1002" left="350" width="84" height="12" font="6"><a href="http://www.google.com/publicdata/home">http://www.</a></text>
<text top="1019" left="82" width="198" height="12" font="6"><a href="http://www.google.com/publicdata/home">google.com/publicdata/home</a></text>
<text top="1018" left="281" width="151" height="15" font="0"><a href="http://www.google.com/publicdata/home">) </a>provides a good ex-</text>
<text top="1036" left="82" width="346" height="15" font="0">ample, demonstrating the use of interactive charts</text>
<text top="1054" left="82" width="346" height="15" font="0">and how they can help to analyse data. The charting</text>
<text top="1072" left="82" width="346" height="15" font="0">data can either be embedded into the html file or read</text>
<text top="1090" left="82" width="346" height="15" font="0">dynamically. The key to the Google Visualisation API</text>
<text top="173" left="459" width="236" height="15" font="0">is that the data is structured in a <a href="http://code.google.com/apis/visualization/documentation/reference.html">“</a></text>
<text top="173" left="695" width="68" height="15" font="6"><a href="http://code.google.com/apis/visualization/documentation/reference.html">DataTable</a></text>
<text top="173" left="763" width="42" height="15" font="0"><a href="http://code.google.com/apis/visualization/documentation/reference.html">”, </a>and</text>
<text top="191" left="459" width="346" height="15" font="0">this is where the <b>googleVis </b>package helps. It uses the</text>
<text top="209" left="459" width="131" height="15" font="0">functionality of the</text>
<text top="209" left="595" width="48" height="15" font="7"><a href="http://cran.r-project.org/package=rjsonio"><b>rjsonio</b></a></text>
<text top="209" left="649" width="66" height="15" font="0">package <a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">(</a></text>
<text top="209" left="714" width="89" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">Temple Lang</a></text>
<text top="209" left="803" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">,</a></text>
<text top="226" left="459" width="30" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">2011</a></text>
<text top="226" left="489" width="219" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">) </a>to transform R data frames into</text>
<text top="226" left="712" width="38" height="15" font="6"><a href="http://www.json.org/">JSON</a></text>
<text top="224" left="750" width="6" height="11" font="5"><a href="http://www.json.org/">3</a></text>
<text top="226" left="760" width="46" height="15" font="0">objects</text>
<text top="244" left="459" width="183" height="15" font="0">as the basis for a DataTable.</text>
<text top="262" left="481" width="324" height="15" font="0">As an example, we will look at the html code of</text>
<text top="280" left="459" width="293" height="15" font="0">a motion chart from Google’s visualisation</text>
<text top="280" left="757" width="47" height="15" font="6"><a href="http://code.google.com/apis/visualization/documentation/gallery/motionchart.html">gallery</a></text>
<text top="280" left="803" width="4" height="15" font="0"><a href="http://code.google.com/apis/visualization/documentation/gallery/motionchart.html">,</a></text>
<text top="298" left="458" width="269" height="15" font="0">which generates output similar to Figure</text>
<text top="298" left="731" width="7" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#2">1</a></text>
<text top="298" left="739" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#2">:</a></text>
<text top="329" left="466" width="55" height="10" font="8">1 &lt;html&gt;</text>
<text top="346" left="466" width="55" height="10" font="8">2 &lt;head&gt;</text>
<text top="362" left="466" width="7" height="10" font="8">3</text>
<text top="362" left="486" width="206" height="10" font="8">&lt;script type=&#34;text/javascript&#34;</text>
<text top="379" left="466" width="7" height="10" font="8">4</text>
<text top="379" left="500" width="233" height="10" font="8">src=&#34;http://www.google.com/jsapi&#34;&gt;</text>
<text top="395" left="466" width="7" height="10" font="8">5</text>
<text top="395" left="486" width="62" height="10" font="8">&lt;/script&gt;</text>
<text top="411" left="466" width="7" height="10" font="8">6</text>
<text top="411" left="486" width="213" height="10" font="8">&lt;script type=&#34;text/javascript&#34;&gt;</text>
<text top="428" left="466" width="7" height="10" font="8">7</text>
<text top="428" left="500" width="231" height="10" font="8">google.load('visualization', '1',</text>
<text top="444" left="466" width="7" height="10" font="8">8</text>
<text top="444" left="507" width="211" height="10" font="8">{'packages':['motionchart']});</text>
<text top="461" left="466" width="7" height="10" font="8">9</text>
<text top="461" left="493" width="247" height="10" font="8">google.setOnLoadCallback(drawChart);</text>
<text top="477" left="459" width="14" height="10" font="8">10</text>
<text top="477" left="493" width="151" height="10" font="8">function drawChart() {</text>
<text top="494" left="459" width="14" height="10" font="8">11</text>
<text top="494" left="493" width="316" height="10" font="8">var data=new google.visualization.DataTable();</text>
<text top="510" left="459" width="14" height="10" font="8">12</text>
<text top="510" left="493" width="238" height="10" font="8">data.addColumn('string', 'Fruit');</text>
<text top="527" left="459" width="14" height="10" font="8">13</text>
<text top="527" left="493" width="217" height="10" font="8">data.addColumn('date', 'Date');</text>
<text top="543" left="459" width="14" height="10" font="8">14</text>
<text top="543" left="493" width="238" height="10" font="8">data.addColumn('number', 'Sales');</text>
<text top="559" left="459" width="14" height="10" font="8">15</text>
<text top="559" left="493" width="259" height="10" font="8">data.addColumn('number', 'Expenses');</text>
<text top="576" left="459" width="14" height="10" font="8">16</text>
<text top="576" left="493" width="259" height="10" font="8">data.addColumn('string', 'Location');</text>
<text top="592" left="459" width="14" height="10" font="8">17</text>
<text top="592" left="493" width="96" height="10" font="8">data.addRows([</text>
<text top="609" left="459" width="14" height="10" font="8">18</text>
<text top="609" left="493" width="320" height="10" font="8">['Apples',new Date(1988,0,1),1000,300,'East'],</text>
<text top="625" left="459" width="14" height="10" font="8">19</text>
<text top="625" left="493" width="327" height="10" font="8">['Oranges',new Date(1988,0,1),1150,200,'West'],</text>
<text top="642" left="459" width="14" height="10" font="8">20</text>
<text top="642" left="493" width="320" height="10" font="8">['Bananas',new Date(1988,0,1),300,250,'West'],</text>
<text top="658" left="459" width="14" height="10" font="8">21</text>
<text top="658" left="493" width="320" height="10" font="8">['Apples',new Date(1989,6,1),1200,400,'East'],</text>
<text top="674" left="459" width="14" height="10" font="8">22</text>
<text top="674" left="493" width="320" height="10" font="8">['Oranges',new Date(1989,6,1),750,150,'West'],</text>
<text top="691" left="459" width="14" height="10" font="8">23</text>
<text top="691" left="493" width="314" height="10" font="8">['Bananas',new Date(1989,6,1),788,617,'West']</text>
<text top="707" left="459" width="14" height="10" font="8">24</text>
<text top="707" left="493" width="21" height="10" font="8">]);</text>
<text top="724" left="459" width="14" height="10" font="8">25</text>
<text top="724" left="493" width="322" height="10" font="8">var chart=new google.visualization.MotionChart(</text>
<text top="740" left="459" width="14" height="10" font="8">26</text>
<text top="740" left="507" width="263" height="10" font="8">document.getElementById('chart_div'));</text>
<text top="757" left="459" width="14" height="10" font="8">27</text>
<text top="757" left="493" width="295" height="10" font="8">chart.draw(data, {width: 600, height:300});</text>
<text top="773" left="459" width="14" height="10" font="8">28</text>
<text top="773" left="486" width="7" height="10" font="8">}</text>
<text top="790" left="459" width="14" height="10" font="8">29</text>
<text top="790" left="486" width="62" height="10" font="8">&lt;/script&gt;</text>
<text top="806" left="459" width="69" height="10" font="8">30 &lt;/head&gt;</text>
<text top="822" left="459" width="62" height="10" font="8">31 &lt;body&gt;</text>
<text top="839" left="459" width="151" height="10" font="8">32 &lt;div id=&#34;chart_div&#34;</text>
<text top="855" left="459" width="14" height="10" font="8">33</text>
<text top="855" left="514" width="240" height="10" font="8">style=&#34;width:600px; height:300px;&#34;&gt;</text>
<text top="872" left="459" width="62" height="10" font="8">34 &lt;/div&gt;</text>
<text top="888" left="459" width="69" height="10" font="8">35 &lt;/body&gt;</text>
<text top="905" left="459" width="69" height="10" font="8">36 &lt;/html&gt;</text>
<text top="933" left="481" width="324" height="15" font="0">The code and data are processed and rendered in</text>
<text top="951" left="459" width="308" height="15" font="0">the browser and is not submitted to any <a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#1">server</a></text>
<text top="948" left="767" width="6" height="11" font="5"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#1">4</a></text>
<text top="951" left="773" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#1">.</a></text>
<text top="968" left="481" width="324" height="15" font="0">You will notice that the above html code has five</text>
<text top="986" left="459" width="86" height="15" font="0">generic <a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#1">parts</a></text>
<text top="984" left="544" width="6" height="11" font="5"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#1">5</a></text>
<text top="986" left="551" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#1">:</a></text>
<text top="1014" left="480" width="328" height="15" font="0">• references to Google’s AJAX (l. 4) and Visualisa-</text>
<text top="1032" left="496" width="112" height="15" font="0">tion API (ll. 7–8),</text>
<text top="1061" left="480" width="295" height="15" font="0">• data to visualise as a DataTable (ll. 11–24),</text>
<text top="1090" left="480" width="310" height="15" font="0">• an instance call to create the chart (ll. 25–26),</text>
<text top="1114" left="99" width="4" height="9" font="9"><a href="http://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen.html">1</a></text>
<text top="1117" left="104" width="488" height="9" font="5"><a href="http://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen.html">http://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen.html</a></text>
<text top="1129" left="99" width="4" height="9" font="9"><a href="http://code.google.com/apis/visualization/documentation/index.html">2</a></text>
<text top="1132" left="104" width="402" height="9" font="5"><a href="http://code.google.com/apis/visualization/documentation/index.html">http://code.google.com/apis/visualization/documentation/index.html</a></text>
<text top="1143" left="99" width="4" height="9" font="9"><a href="http://www.json.org/">3</a></text>
<text top="1147" left="104" width="122" height="9" font="5"><a href="http://www.json.org/">http://www.json.org/</a></text>
<text top="1158" left="99" width="4" height="9" font="9">4</text>
<text top="1161" left="107" width="561" height="9" font="5"><a href="http://code.google.com/apis/visualization/documentation/gallery/motionchart.html#Data_Policy">http://code.google.com/apis/visualization/documentation/gallery/motionchart.html#Data_Policy</a></text>
<text top="1173" left="99" width="4" height="9" font="9">5</text>
<text top="1175" left="104" width="106" height="12" font="1">For more details see</text>
<text top="1176" left="213" width="421" height="9" font="5"><a href="http://code.google.com/apis/chart/interactive/docs/adding_charts.html">http://code.google.com/apis/chart/interactive/docs/adding_charts.html</a></text>
<text top="1218" left="82" width="257" height="15" font="0">The R Journal Vol. 3/2, December 2011</text>
<text top="1218" left="704" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="2" position="absolute" top="0" left="0" height="1262" width="892">
	<fontspec id="10" size="7" family="Times" color="#000000"/>
	<fontspec id="11" size="7" family="Times" color="#000000"/>
	<fontspec id="12" size="7" family="Times" color="#1a1a18"/>
	<fontspec id="13" size="7" family="Times" color="#1a1a18"/>
	<fontspec id="14" size="5" family="Times" color="#444444"/>
<text top="67" left="83" width="11" height="15" font="0">C</text>
<text top="69" left="94" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="67" left="184" width="10" height="15" font="0">R</text>
<text top="69" left="195" width="61" height="12" font="1">ESEARCH</text>
<text top="67" left="261" width="12" height="15" font="0">A</text>
<text top="69" left="273" width="53" height="12" font="1">RTICLES</text>
<text top="67" left="790" width="15" height="15" font="0">41</text>
<text top="398" left="91" width="30" height="11" font="10"><b>Y-axis</b></text>
<text top="410" left="91" width="79" height="11" font="11">Click here to select </text>
<text top="421" left="91" width="77" height="11" font="11">indicators for the y-</text>
<text top="432" left="91" width="17" height="11" font="11">axis.</text>
<text top="205" left="91" width="70" height="11" font="12"><b>Lin / Log scale</b></text>
<text top="216" left="91" width="95" height="11" font="13">X- and y-axis scales can </text>
<text top="228" left="91" width="48" height="11" font="13">be linear or </text>
<text top="239" left="91" width="91" height="11" font="13">logarithmic. A log scale </text>
<text top="250" left="91" width="83" height="11" font="13">can make it easier to </text>
<text top="261" left="91" width="42" height="11" font="13">see trends.</text>
<text top="568" left="91" width="54" height="11" font="12"><b>Play / Stop</b></text>
<text top="579" left="91" width="71" height="11" font="13">Click Play/Stop to </text>
<text top="590" left="91" width="88" height="11" font="13">control the animation. </text>
<text top="601" left="91" width="64" height="11" font="13">(How the graph </text>
<text top="613" left="91" width="76" height="11" font="13">changes over time.)</text>
<text top="632" left="250" width="25" height="11" font="12"><b>Time</b></text>
<text top="643" left="250" width="70" height="11" font="13">Click and drag to </text>
<text top="654" left="250" width="47" height="11" font="13">change year.</text>
<text top="483" left="91" width="45" height="11" font="12"><b>Speed of </b></text>
<text top="494" left="91" width="49" height="11" font="12"><b>animation</b></text>
<text top="506" left="91" width="77" height="11" font="13">Drag to change the </text>
<text top="517" left="91" width="91" height="11" font="13">speed of the animation.</text>
<text top="626" left="447" width="32" height="11" font="12"><b>X-axis</b></text>
<text top="637" left="447" width="134" height="11" font="13">Click here to select indicators for </text>
<text top="648" left="447" width="133" height="11" font="13">the x-axis. You can also choose to </text>
<text top="660" left="447" width="94" height="11" font="13">display time on this axis.</text>
<text top="135" left="452" width="53" height="11" font="12"><b>Chart type</b></text>
<text top="146" left="452" width="168" height="11" font="13">Change between bubble, bar and line chart.</text>
<text top="192" left="700" width="33" height="11" font="12"><b>Colour</b></text>
<text top="204" left="700" width="64" height="11" font="13">Click to choose </text>
<text top="215" left="700" width="70" height="11" font="13">another indicator </text>
<text top="226" left="700" width="41" height="11" font="13">for colour.</text>
<text top="343" left="700" width="76" height="11" font="12"><b>Select variables</b></text>
<text top="354" left="700" width="59" height="11" font="13">Click boxes to </text>
<text top="365" left="700" width="56" height="11" font="13">select specific </text>
<text top="376" left="700" width="73" height="11" font="13">variables. (You can </text>
<text top="387" left="700" width="53" height="11" font="13">also click the </text>
<text top="399" left="700" width="35" height="11" font="13">bubbles.)</text>
<text top="422" left="700" width="28" height="11" font="12"><b>Trails</b></text>
<text top="434" left="700" width="55" height="11" font="13">Click Trails to </text>
<text top="445" left="700" width="68" height="11" font="13">follow a selected </text>
<text top="456" left="700" width="72" height="11" font="13">country while the </text>
<text top="467" left="700" width="61" height="11" font="13">animation plays.</text>
<text top="272" left="700" width="66" height="11" font="12"><b>Size indicator</b></text>
<text top="283" left="700" width="79" height="11" font="13">Select the indicator </text>
<text top="294" left="700" width="69" height="11" font="13">which represents </text>
<text top="305" left="700" width="58" height="11" font="13">the size of the </text>
<text top="316" left="700" width="26" height="11" font="13">bubble</text>
<text top="218" left="461" width="57" height="11" font="12"><b>To zoom in:</b></text>
<text top="229" left="461" width="98" height="11" font="13">1. Put your mouse in the </text>
<text top="240" left="461" width="41" height="11" font="13">chart area.</text>
<text top="252" left="461" width="85" height="11" font="13">2. Hold down the left </text>
<text top="263" left="461" width="102" height="11" font="13">mouse button and draw a </text>
<text top="274" left="461" width="97" height="11" font="13">rectangle over the items </text>
<text top="285" left="461" width="101" height="11" font="13">that you want to zoom in.</text>
<text top="296" left="461" width="99" height="11" font="13">3. Release the left mouse </text>
<text top="307" left="461" width="28" height="11" font="13">button.</text>
<text top="319" left="461" width="97" height="11" font="13">4. In the menu that pops </text>
<text top="330" left="461" width="78" height="11" font="13">up, select 'Zoom in'.</text>
<text top="352" left="461" width="65" height="11" font="12"><b>To zoom out:</b></text>
<text top="363" left="461" width="100" height="11" font="13">Click the 'Zoom out' link </text>
<text top="375" left="461" width="106" height="11" font="13">above the zoom thumbnail </text>
<text top="386" left="461" width="68" height="11" font="13">in the right panel.</text>
<text top="575" left="700" width="40" height="11" font="12"><b>Settings</b></text>
<text top="586" left="700" width="73" height="11" font="13">Change opacity of </text>
<text top="597" left="700" width="76" height="11" font="13">non selected items </text>
<text top="609" left="700" width="47" height="11" font="13">and further </text>
<text top="620" left="700" width="68" height="11" font="13">advanced settings</text>
<text top="655" left="631" width="153" height="9" font="14">Adapted from www.gapminder.org, which used </text>
<text top="664" left="631" width="150" height="9" font="14">an original idea by wwww.juicygeography.co.uk</text>
<text top="699" left="82" width="727" height="15" font="0">Figure 1: Overview of a Google Motion Chart. Screenshot of the output of plot(gvisMotionChart(Fruits,</text>
<text top="718" left="82" width="267" height="12" font="0">idvar = ’Fruit’, timevar = ’Year’))</text>
<text top="767" left="103" width="328" height="15" font="0">• a method call to draw the chart including op-</text>
<text top="785" left="120" width="297" height="15" font="0">tions, shown here as width and height (l. 27),</text>
<text top="817" left="103" width="326" height="15" font="0">• an HTML &lt;div&gt; element to add the chart to the</text>
<text top="835" left="119" width="104" height="15" font="0">page (ll. 32–34).</text>
<text top="866" left="82" width="347" height="15" font="0">These principles hold true for most of the interactive</text>
<text top="884" left="82" width="255" height="15" font="0">charts of the Google Visualisation API.</text>
<text top="902" left="105" width="324" height="15" font="0">However, before you use the API you should read</text>
<text top="920" left="82" width="21" height="15" font="0">the</text>
<text top="920" left="108" width="285" height="15" font="6"><a href="http://code.google.com/apis/visualization/terms.html">Google Visualisation API Terms of Service</a></text>
<text top="917" left="393" width="6" height="11" font="5"><a href="http://code.google.com/apis/visualization/terms.html">6</a></text>
<text top="920" left="403" width="26" height="15" font="0">and</text>
<text top="938" left="82" width="21" height="15" font="0">the</text>
<text top="938" left="108" width="323" height="15" font="6"><a href="http://code.google.com/apis/maps/terms.html">Google Maps/Google Earth APIs Terms of Ser-</a></text>
<text top="956" left="82" width="27" height="15" font="6"><a href="http://code.google.com/apis/maps/terms.html">vice</a></text>
<text top="953" left="109" width="6" height="11" font="5"><a href="http://code.google.com/apis/maps/terms.html">7</a></text>
<text top="956" left="115" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#2">.</a></text>
<text top="1005" left="82" width="227" height="21" font="4"><b>The googleVis package</b></text>
<text top="1044" left="82" width="347" height="15" font="0">The <b>googleVis </b>package provides an interface between</text>
<text top="1062" left="82" width="346" height="15" font="0">R and the Google Visualisation API. The functions of</text>
<text top="1080" left="82" width="346" height="15" font="0">the package allow the user to visualise data stored in</text>
<text top="1098" left="82" width="324" height="15" font="0">R data frames with the Google Visualisation API.</text>
<text top="1116" left="105" width="324" height="15" font="0">Version (0.2.12) of the package provides interfaces</text>
<text top="1134" left="82" width="348" height="15" font="0">to Motion Charts, Annotated Time Lines, Geo Maps,</text>
<text top="767" left="459" width="348" height="15" font="0">Maps, Geo Charts, Intensity Maps, Tables, Gauges,</text>
<text top="785" left="459" width="348" height="15" font="0">and Tree Maps, as well as Line-, Bar-, Column-, Area-,</text>
<text top="803" left="459" width="348" height="15" font="0">Combo-, Scatter-, Candlestick-, Pie- and Org Charts;</text>
<text top="821" left="459" width="67" height="15" font="0">see Figure</text>
<text top="821" left="530" width="7" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#3">2</a></text>
<text top="821" left="541" width="127" height="15" font="0">for some examples.</text>
<text top="843" left="481" width="324" height="15" font="0">The output of a <b>googleVis </b>function is html code</text>
<text top="861" left="459" width="346" height="15" font="0">that contains the data and references to JavaScript</text>
<text top="879" left="459" width="349" height="15" font="0">functions hosted by Google. A browser with an In-</text>
<text top="897" left="459" width="346" height="15" font="0">ternet connection is required to view the output, and</text>
<text top="915" left="459" width="346" height="15" font="0">for Motion Charts, Geo Maps and Annotated Time</text>
<text top="933" left="459" width="346" height="15" font="0">Lines also Flash. The actual chart is rendered in the</text>
<text top="951" left="459" width="57" height="15" font="0">browser.</text>
<text top="973" left="481" width="324" height="15" font="0">Please note that Flash charts may not work when</text>
<text top="991" left="459" width="346" height="15" font="0">loaded as a local file due to security settings, and</text>
<text top="1009" left="459" width="349" height="15" font="0">therefore may require to be displayed via a web server.</text>
<text top="1027" left="459" width="347" height="15" font="0">Fortunately, R comes with an internal HTTP server</text>
<text top="1045" left="458" width="347" height="15" font="0">which allows the <b>googleVis </b>package to display pages</text>
<text top="1063" left="459" width="346" height="15" font="0">locally. Other options are to use the <b>R.rsp </b>package</text>
<text top="1080" left="459" width="86" height="15" font="0">or RApache <a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">(</a></text>
<text top="1080" left="545" width="48" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">Horner</a></text>
<text top="1080" left="592" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">,</a></text>
<text top="1080" left="600" width="29" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">2011</a></text>
<text top="1080" left="629" width="39" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">) </a>with</text>
<text top="1081" left="671" width="35" height="15" font="7"><a href="http://cran.r-project.org/package=brew"><b>brew</b></a></text>
<text top="1080" left="710" width="5" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">(</a></text>
<text top="1080" left="715" width="48" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">Horner</a></text>
<text top="1080" left="762" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">,</a></text>
<text top="1080" left="770" width="29" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">2011</a></text>
<text top="1080" left="799" width="9" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">).</a></text>
<text top="1098" left="459" width="346" height="15" font="0">Both <b>R.rsp </b>and <b>brew </b>have the capability to extract</text>
<text top="1116" left="459" width="346" height="15" font="0">and execute R code from html code, similar to the</text>
<text top="1134" left="459" width="186" height="15" font="0">approach taken by Sweave <a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">(</a></text>
<text top="1134" left="644" width="42" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">Leisch</a></text>
<text top="1134" left="687" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">,</a></text>
<text top="1134" left="694" width="30" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">2002</a></text>
<text top="1134" left="724" width="41" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">) </a>for L</text>
<text top="1134" left="759" width="9" height="11" font="1">A</text>
<text top="1134" left="766" width="28" height="18" font="0">TEX.</text>
<text top="1158" left="99" width="4" height="9" font="9"><a href="http://code.google.com/apis/visualization/terms.html">6</a></text>
<text top="1161" left="104" width="317" height="9" font="5"><a href="http://code.google.com/apis/visualization/terms.html">http://code.google.com/apis/visualization/terms.html</a></text>
<text top="1173" left="99" width="4" height="9" font="9"><a href="http://code.google.com/apis/maps/terms.html">7</a></text>
<text top="1176" left="104" width="262" height="9" font="5"><a href="http://code.google.com/apis/maps/terms.html">http://code.google.com/apis/maps/terms.html</a></text>
<text top="1218" left="82" width="257" height="15" font="0">The R Journal Vol. 3/2, December 2011</text>
<text top="1218" left="704" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="3" position="absolute" top="0" left="0" height="1262" width="892">
<text top="67" left="82" width="15" height="15" font="0">42</text>
<text top="67" left="562" width="11" height="15" font="0">C</text>
<text top="69" left="573" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="67" left="664" width="10" height="15" font="0">R</text>
<text top="69" left="674" width="61" height="12" font="1">ESEARCH</text>
<text top="67" left="740" width="12" height="15" font="0">A</text>
<text top="69" left="752" width="53" height="12" font="1">RTICLES</text>
<text top="833" left="82" width="725" height="15" font="0">Figure 2: Screenshot of some of the outputs of demo(googleVis). Clockwise from top left: gvisMotionChart,</text>
<text top="853" left="82" width="160" height="12" font="0">gvisAnnotatedTimeLine</text>
<text top="851" left="243" width="345" height="15" font="0">, gvisGeoMap, gvisTreeMap, gvisTable, and gvisMap.</text>
<text top="902" left="105" width="327" height="15" font="0">The individual functions of the <b>googleVis </b>pack-</text>
<text top="919" left="82" width="346" height="15" font="0">age are documented in detail in the help pages and</text>
<text top="937" left="82" width="54" height="15" font="0">package</text>
<text top="937" left="140" width="54" height="15" font="6"><a href="http://cran.r-project.org/web/packages/googleVis/vignettes/googleVis.pdf">vignette</a></text>
<text top="937" left="194" width="238" height="15" font="0"><a href="http://cran.r-project.org/web/packages/googleVis/vignettes/googleVis.pdf">. </a>Here we will cover only the princi-</text>
<text top="955" left="82" width="130" height="15" font="0">ples of the package.</text>
<text top="975" left="105" width="324" height="15" font="0">As an example we will show how to generate a</text>
<text top="993" left="82" width="238" height="15" font="0">Motion Chart as displayed in Figure</text>
<text top="993" left="324" width="7" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#2">1</a></text>
<text top="993" left="332" width="100" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#2">. </a>It works simi-</text>
<text top="1011" left="82" width="346" height="15" font="0">larly for the other APIs. Further examples are covered</text>
<text top="1029" left="82" width="346" height="15" font="0">in the demos of the <b>googleVis </b>package and on the</text>
<text top="1047" left="82" width="165" height="15" font="0">project Google Code site.</text>
<text top="1067" left="105" width="325" height="15" font="0">The design of the visualisation functions is fairly</text>
<text top="1085" left="82" width="346" height="15" font="0">generic. The name of the visualisation function is</text>
<text top="1104" left="80" width="46" height="12" font="0">’gvis’</text>
<text top="1103" left="130" width="302" height="15" font="0">followed by the chart type. Thus for the Mo-</text>
<text top="1121" left="82" width="130" height="15" font="0">tion Chart we have:</text>
<text top="1159" left="82" width="242" height="10" font="8">gvisMotionChart(data, idvar = 'id',</text>
<text top="1175" left="110" width="242" height="10" font="8">timevar = 'date', options = list())</text>
<text top="902" left="459" width="346" height="15" font="0">Here data is the input data.frame and the arguments</text>
<text top="921" left="459" width="38" height="12" font="0">idvar</text>
<text top="919" left="500" width="305" height="15" font="0">and timevar specify the column names of the id</text>
<text top="937" left="458" width="347" height="15" font="0">variable and time variable for the plot, while display</text>
<text top="955" left="459" width="346" height="15" font="0">options are set in an optional list. The options and</text>
<text top="973" left="459" width="349" height="15" font="0">data requirements follow those of the Google Visuali-</text>
<text top="991" left="459" width="346" height="15" font="0">sation API and are documented in the help pages, see</text>
<text top="1010" left="459" width="175" height="12" font="0">help(’gvisMotionChart’)</text>
<text top="1009" left="634" width="4" height="15" font="0">.</text>
<text top="1028" left="481" width="324" height="15" font="0">The output of a <b>googleVis </b>function is a list of lists</text>
<text top="1046" left="458" width="347" height="15" font="0">(a nested list) containing information about the chart</text>
<text top="1064" left="459" width="346" height="15" font="0">type, chart id, and the html code in a sub-list split into</text>
<text top="1082" left="459" width="217" height="15" font="0">header, chart, caption and footer.</text>
<text top="1101" left="481" width="324" height="15" font="0">The idea behind this concept is that users get a</text>
<text top="1119" left="459" width="346" height="15" font="0">complete web page while at the same time they can</text>
<text top="1137" left="459" width="346" height="15" font="0">extract only specific parts, such as the chart. This is</text>
<text top="1155" left="458" width="347" height="15" font="0">particularly helpful if the package functions are used</text>
<text top="1173" left="459" width="349" height="15" font="0">in solutions where the user wants to feed the visuali-</text>
<text top="1218" left="82" width="257" height="15" font="0">The R Journal Vol. 3/2, December 2011</text>
<text top="1218" left="704" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="4" position="absolute" top="0" left="0" height="1262" width="892">
	<fontspec id="15" size="15" family="Times" color="#000000"/>
<text top="67" left="83" width="11" height="15" font="0">C</text>
<text top="69" left="94" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="67" left="184" width="10" height="15" font="0">R</text>
<text top="69" left="195" width="61" height="12" font="1">ESEARCH</text>
<text top="67" left="261" width="12" height="15" font="0">A</text>
<text top="69" left="273" width="53" height="12" font="1">RTICLES</text>
<text top="67" left="790" width="15" height="15" font="0">43</text>
<text top="125" left="82" width="346" height="15" font="0">sation output into other sites, or would like to embed</text>
<text top="143" left="82" width="349" height="15" font="0">them into rsp-pages, or use RApache or Google Gad-</text>
<text top="161" left="82" width="30" height="15" font="0">gets.</text>
<text top="179" left="105" width="324" height="15" font="0">The output of a <b>googleVis </b>function will be of class</text>
<text top="198" left="82" width="46" height="12" font="0">&#34;gvis&#34;</text>
<text top="197" left="132" width="296" height="15" font="0">and &#34;list&#34;. Generic print (print.gvis) and</text>
<text top="215" left="82" width="347" height="15" font="0">plot (plot.gvis) methods exist to ease the handling</text>
<text top="233" left="82" width="100" height="15" font="0">of such objects.</text>
<text top="251" left="105" width="324" height="15" font="0">To illustrate the concept we shall create a motion</text>
<text top="268" left="82" width="206" height="15" font="0">chart using the Fruits data set.</text>
<text top="310" left="82" width="179" height="17" font="15"><b>Motion chart example</b></text>
<text top="340" left="82" width="346" height="15" font="0">Following the documentation of the Google Motion</text>
<text top="358" left="82" width="347" height="15" font="0">Chart API we need a data set which has at least four</text>
<text top="376" left="82" width="346" height="15" font="0">columns: one identifying the variable we would like</text>
<text top="394" left="82" width="346" height="15" font="0">to plot, one time variable, and at least two numerical</text>
<text top="412" left="82" width="347" height="15" font="0">variables; further numerical and character columns</text>
<text top="430" left="82" width="81" height="15" font="0">are allowed.</text>
<text top="448" left="105" width="280" height="15" font="0">As an example we use the Fruits data set:</text>
<text top="477" left="82" width="103" height="10" font="8">R&gt; data(Fruits)</text>
<text top="494" left="82" width="226" height="10" font="8">R&gt; Fruits[, -7] # ignore column 7</text>
<text top="527" left="110" width="281" height="10" font="8">Fruit Year Location Sales Expenses Profit</text>
<text top="543" left="82" width="7" height="10" font="8">1</text>
<text top="543" left="103" width="75" height="10" font="8">Apples 2008</text>
<text top="543" left="212" width="27" height="10" font="8">West</text>
<text top="543" left="267" width="14" height="10" font="8">98</text>
<text top="543" left="329" width="14" height="10" font="8">78</text>
<text top="543" left="377" width="14" height="10" font="8">20</text>
<text top="559" left="82" width="7" height="10" font="8">2</text>
<text top="559" left="103" width="75" height="10" font="8">Apples 2009</text>
<text top="559" left="213" width="27" height="10" font="8">West</text>
<text top="559" left="261" width="21" height="10" font="8">111</text>
<text top="559" left="329" width="14" height="10" font="8">79</text>
<text top="559" left="377" width="14" height="10" font="8">32</text>
<text top="576" left="82" width="7" height="10" font="8">3</text>
<text top="576" left="103" width="75" height="10" font="8">Apples 2010</text>
<text top="576" left="213" width="27" height="10" font="8">West</text>
<text top="576" left="268" width="14" height="10" font="8">89</text>
<text top="576" left="329" width="14" height="10" font="8">76</text>
<text top="576" left="377" width="14" height="10" font="8">13</text>
<text top="592" left="82" width="96" height="10" font="8">4 Oranges 2008</text>
<text top="592" left="212" width="27" height="10" font="8">East</text>
<text top="592" left="267" width="14" height="10" font="8">96</text>
<text top="592" left="329" width="14" height="10" font="8">81</text>
<text top="592" left="377" width="14" height="10" font="8">15</text>
<text top="609" left="82" width="96" height="10" font="8">5 Bananas 2008</text>
<text top="609" left="213" width="27" height="10" font="8">East</text>
<text top="609" left="268" width="14" height="10" font="8">85</text>
<text top="609" left="329" width="14" height="10" font="8">76</text>
<text top="609" left="384" width="7" height="10" font="8">9</text>
<text top="625" left="82" width="96" height="10" font="8">6 Oranges 2009</text>
<text top="625" left="213" width="27" height="10" font="8">East</text>
<text top="625" left="268" width="14" height="10" font="8">93</text>
<text top="625" left="329" width="14" height="10" font="8">80</text>
<text top="625" left="377" width="14" height="10" font="8">13</text>
<text top="642" left="82" width="96" height="10" font="8">7 Bananas 2009</text>
<text top="642" left="212" width="27" height="10" font="8">East</text>
<text top="642" left="267" width="14" height="10" font="8">94</text>
<text top="642" left="329" width="14" height="10" font="8">78</text>
<text top="642" left="377" width="14" height="10" font="8">16</text>
<text top="658" left="82" width="96" height="10" font="8">8 Oranges 2010</text>
<text top="658" left="213" width="27" height="10" font="8">East</text>
<text top="658" left="268" width="14" height="10" font="8">98</text>
<text top="658" left="329" width="14" height="10" font="8">91</text>
<text top="658" left="384" width="7" height="10" font="8">7</text>
<text top="675" left="82" width="96" height="10" font="8">9 Bananas 2010</text>
<text top="675" left="213" width="27" height="10" font="8">East</text>
<text top="675" left="268" width="14" height="10" font="8">81</text>
<text top="675" left="329" width="14" height="10" font="8">71</text>
<text top="675" left="377" width="14" height="10" font="8">10</text>
<text top="701" left="82" width="346" height="15" font="0">Here we will use the columns ’Fruit’ and ’Year’ as</text>
<text top="719" left="82" width="218" height="15" font="0">id and time variable respectively.</text>
<text top="748" left="82" width="14" height="10" font="8">R&gt;</text>
<text top="748" left="110" width="309" height="10" font="8">M &lt;- gvisMotionChart(Fruits, idvar = &#34;Fruit&#34;,</text>
<text top="765" left="254" width="117" height="10" font="8">timevar = &#34;Year&#34;)</text>
<text top="789" left="82" width="347" height="15" font="0">The structural output of gvisMotionChart is a list of</text>
<text top="806" left="82" width="159" height="15" font="0">lists as described above:</text>
<text top="838" left="82" width="14" height="10" font="8">R&gt;</text>
<text top="838" left="110" width="41" height="10" font="8">str(M)</text>
<text top="871" left="82" width="62" height="10" font="8">List of 3</text>
<text top="887" left="89" width="41" height="10" font="8">$ type</text>
<text top="887" left="151" width="130" height="10" font="8">: chr &#34;MotionChart&#34;</text>
<text top="904" left="89" width="261" height="10" font="8">$ chartid: chr &#34;MotionChartID12ae2fff&#34;</text>
<text top="920" left="89" width="41" height="10" font="8">$ html</text>
<text top="920" left="151" width="69" height="10" font="8">:List of 4</text>
<text top="936" left="96" width="295" height="10" font="8">..$ header : chr &#34;&lt;!DOCTYPE html PUBLIC ...</text>
<text top="953" left="96" width="62" height="10" font="8">..$ chart</text>
<text top="953" left="172" width="219" height="10" font="8">: Named chr [1:7] &#34;&lt;!-- Moti ...</text>
<text top="969" left="96" width="295" height="10" font="8">.. ..- attr(*, &#34;names&#34;)= chr [1:7] &#34;jsH ...</text>
<text top="986" left="96" width="295" height="10" font="8">..$ caption: chr &#34;&lt;div&gt;&lt;span&gt;Data: Fruit...</text>
<text top="1002" left="96" width="295" height="10" font="8">..$ footer : chr &#34;\n&lt;!-- htmlFooter --&gt;\...</text>
<text top="1019" left="89" width="295" height="10" font="8">- attr(*, &#34;class&#34;)= chr [1:2] &#34;gvis&#34; &#34;list&#34;</text>
<text top="1048" left="105" width="324" height="15" font="0">The first two items of the list contain information</text>
<text top="1065" left="82" width="349" height="15" font="0">about the chart type used and the individual chart id.</text>
<text top="1083" left="82" width="347" height="15" font="0">The html output is a list with header, chart, caption</text>
<text top="1101" left="82" width="346" height="15" font="0">and footer. This allows the user to extract only certain</text>
<text top="1119" left="82" width="341" height="15" font="0">parts of the page, or to create a complete html page.</text>
<text top="1137" left="105" width="324" height="15" font="0">The header part of the html page has only basic</text>
<text top="1155" left="82" width="349" height="15" font="0">html and formatting tags and provides a simple lay-</text>
<text top="1173" left="82" width="50" height="15" font="0">out, see</text>
<text top="127" left="459" width="14" height="10" font="8">R&gt;</text>
<text top="127" left="486" width="126" height="10" font="8">print(M, 'header')</text>
<text top="127" left="633" width="158" height="10" font="8"># output not shown here</text>
<text top="165" left="481" width="324" height="15" font="0">The actual Google visualisation code is stored with</text>
<text top="183" left="459" width="346" height="15" font="0">the data in the named character vector chart of the</text>
<text top="201" left="459" width="83" height="15" font="0">html list, see</text>
<text top="243" left="459" width="14" height="10" font="8">R&gt;</text>
<text top="243" left="486" width="119" height="10" font="8">print(M, 'chart')</text>
<text top="243" left="633" width="158" height="10" font="8"># output not shown here</text>
<text top="281" left="458" width="347" height="15" font="0">The sub-items of the chart object give the user more</text>
<text top="299" left="459" width="346" height="15" font="0">granular access to JavaScript functions and html tags</text>
<text top="317" left="459" width="346" height="15" font="0">of the visualisation. A basic chart caption and html</text>
<text top="335" left="459" width="190" height="15" font="0">footer complete the html list:</text>
<text top="377" left="459" width="14" height="10" font="8">R&gt;</text>
<text top="377" left="486" width="133" height="10" font="8">print(M, 'caption')</text>
<text top="377" left="633" width="158" height="10" font="8"># output not shown here</text>
<text top="393" left="459" width="14" height="10" font="8">R&gt;</text>
<text top="393" left="486" width="126" height="10" font="8">print(M, 'footer')</text>
<text top="393" left="633" width="158" height="10" font="8"># output not shown here</text>
<text top="443" left="459" width="207" height="17" font="15"><b>Displaying &#34;gvis&#34; objects</b></text>
<text top="477" left="458" width="215" height="15" font="0">To display the page locally, type:</text>
<text top="519" left="459" width="14" height="10" font="8">R&gt;</text>
<text top="519" left="486" width="48" height="10" font="8">plot(M)</text>
<text top="519" left="569" width="226" height="10" font="8"># returns invisibly the file name</text>
<text top="557" left="481" width="324" height="15" font="0">The plot method for &#34;gvis&#34; objects creates html</text>
<text top="575" left="459" width="346" height="15" font="0">files in a temporary folder using the type and chart id</text>
<text top="593" left="459" width="346" height="15" font="0">information of the object and it will display the output</text>
<text top="611" left="459" width="349" height="15" font="0">using the R HTTP help web server locally. The R com-</text>
<text top="628" left="459" width="346" height="15" font="0">mand tempdir() shows the path of the per-session</text>
<text top="646" left="459" width="136" height="15" font="0">temporary directory.</text>
<text top="666" left="481" width="326" height="15" font="0">Further examples are part of the <b>googleVis </b>demos,</text>
<text top="684" left="459" width="349" height="15" font="0">including one showing how a Geo Map can be ani-</text>
<text top="702" left="459" width="346" height="15" font="0">mated with additional JavaScript, see demo(package</text>
<text top="721" left="459" width="107" height="12" font="0">= &#34;googleVis&#34;)</text>
<text top="720" left="566" width="4" height="15" font="0">.</text>
<text top="772" left="459" width="263" height="17" font="15"><b>Combing charts with gvisMerge</b></text>
<text top="805" left="458" width="347" height="15" font="0">The function gvisMerge takes two &#34;gvis&#34; objects and</text>
<text top="823" left="459" width="349" height="15" font="0">merges the underlying components into one page.</text>
<text top="841" left="458" width="348" height="15" font="0">The charts are aligned either horizontally or vertically</text>
<text top="859" left="459" width="242" height="15" font="0">next to each other in an HTML table.</text>
<text top="879" left="481" width="327" height="15" font="0">The output of gvisMerge is a &#34;gvis&#34; object again.</text>
<text top="897" left="458" width="348" height="15" font="0">This allows us to apply the same function iteratively</text>
<text top="915" left="459" width="346" height="15" font="0">to create more complex chart layouts. The following</text>
<text top="933" left="459" width="133" height="15" font="0">example, see Figure</text>
<text top="933" left="596" width="8" height="15" font="6"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">3</a></text>
<text top="933" left="604" width="202" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">, </a>aligns a Geo Chart and Table</text>
<text top="951" left="459" width="346" height="15" font="0">below each other, and combines the output with a</text>
<text top="969" left="459" width="170" height="15" font="0">Motion Chart to the right.</text>
<text top="1011" left="459" width="322" height="10" font="8">G &lt;- gvisGeoChart(Exports, &#34;Country&#34;, &#34;Profit&#34;,</text>
<text top="1027" left="521" width="288" height="10" font="8">options = list(width = 200, height = 100))</text>
<text top="1044" left="459" width="158" height="10" font="8">T &lt;- gvisTable(Exports,</text>
<text top="1060" left="521" width="288" height="10" font="8">options = list(width = 200, height = 270))</text>
<text top="1077" left="459" width="309" height="10" font="8">M &lt;- gvisMotionChart(Fruits, &#34;Fruit&#34;, &#34;Year&#34;,</text>
<text top="1093" left="521" width="288" height="10" font="8">options = list(width = 400, height = 370))</text>
<text top="1110" left="459" width="281" height="10" font="8">GT &lt;- gvisMerge(G, T, horizontal = FALSE)</text>
<text top="1126" left="459" width="288" height="10" font="8">GTM &lt;- gvisMerge(GT, M, horizontal = TRUE,</text>
<text top="1142" left="486" width="96" height="10" font="8">tableOptions =</text>
<text top="1159" left="486" width="281" height="10" font="8">&#34;bgcolor = \&#34;#CCCCCC\&#34; cellspacing = 10&#34;)</text>
<text top="1175" left="459" width="62" height="10" font="8">plot(GTM)</text>
<text top="1218" left="82" width="257" height="15" font="0">The R Journal Vol. 3/2, December 2011</text>
<text top="1218" left="704" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="5" position="absolute" top="0" left="0" height="1262" width="892">
<text top="67" left="82" width="15" height="15" font="0">44</text>
<text top="67" left="562" width="11" height="15" font="0">C</text>
<text top="69" left="573" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="67" left="664" width="10" height="15" font="0">R</text>
<text top="69" left="674" width="61" height="12" font="1">ESEARCH</text>
<text top="67" left="740" width="12" height="15" font="0">A</text>
<text top="69" left="752" width="53" height="12" font="1">RTICLES</text>
<text top="399" left="92" width="327" height="15" font="0">Figure 3: Three charts combined with gvisMerge.</text>
<text top="439" left="82" width="349" height="17" font="15"><b>Embedding googleVis in web sites dynam-</b></text>
<text top="460" left="82" width="45" height="17" font="15"><b>ically</b></text>
<text top="490" left="82" width="347" height="15" font="0">With the R packages <b>R.rsp </b>and <b>brew </b>we have two</text>
<text top="508" left="82" width="346" height="15" font="0">options to integrate R snippets into html code. While</text>
<text top="526" left="82" width="346" height="15" font="0">the <b>R.rsp </b>package comes with its own internal web</text>
<text top="544" left="82" width="346" height="15" font="0">server, <b>brew </b>requires the Apache HTTP server with</text>
<text top="562" left="82" width="204" height="15" font="0">the RApache module installed.</text>
<text top="580" left="105" width="324" height="15" font="0">Both packages allow the user to embed R code</text>
<text top="598" left="82" width="347" height="15" font="0">into html code. The R code is filtered by the <b>R.rsp </b>or</text>
<text top="616" left="82" width="346" height="15" font="0">RApache web server and executed at run time. As an</text>
<text top="634" left="82" width="346" height="15" font="0">example, we can insert the above motion chart into a</text>
<text top="652" left="82" width="36" height="15" font="0">page:</text>
<text top="685" left="82" width="46" height="12" font="0">&lt;html&gt;</text>
<text top="703" left="81" width="46" height="12" font="0">&lt;body&gt;</text>
<text top="721" left="81" width="183" height="12" font="0">&lt;% library(googleVis) %&gt;</text>
<text top="739" left="81" width="351" height="12" font="0">&lt;% M &lt;- gvisMotionChart(Fruits, idvar=&#34;Fruit&#34;,</text>
<text top="757" left="113" width="137" height="12" font="0">timevar=&#34;Year&#34;) %&gt;</text>
<text top="775" left="81" width="145" height="12" font="0">&lt;%= M$html$chart %&gt;</text>
<text top="792" left="81" width="53" height="12" font="0">&lt;/body&gt;</text>
<text top="810" left="81" width="53" height="12" font="0">&lt;/html&gt;</text>
<text top="841" left="105" width="324" height="15" font="0">The syntax of <b>R.rsp </b>and <b>brew </b>are very similar. The</text>
<text top="859" left="82" width="347" height="15" font="0">R code included in &lt;%. . . %&gt; is executed when read by</text>
<text top="877" left="82" width="349" height="15" font="0">the HTTP server, but no R output will be displayed.</text>
<text top="895" left="82" width="347" height="15" font="0">To insert the R output into the html code we have</text>
<text top="913" left="82" width="346" height="15" font="0">to add an equal sign, &lt;%=. . . %&gt;, which acts as a cat</text>
<text top="930" left="82" width="346" height="15" font="0">statement. In the example above the chart code is</text>
<text top="948" left="82" width="198" height="15" font="0">embedded into the html code.</text>
<text top="966" left="105" width="324" height="15" font="0">Examples for both approaches are part of the</text>
<text top="984" left="82" width="68" height="15" font="3"><b>googleVis</b></text>
<text top="984" left="156" width="273" height="15" font="0">package. For more information see the</text>
<text top="1002" left="82" width="262" height="15" font="0">vignettes and help files of the packages.</text>
<text top="1049" left="82" width="96" height="21" font="4"><b>Summary</b></text>
<text top="1087" left="82" width="349" height="15" font="0">Combining R with the Google Visualisation API en-</text>
<text top="1105" left="82" width="348" height="15" font="0">ables users to quickly create powerful analysis tools,</text>
<text top="125" left="458" width="347" height="15" font="0">which can be shared online. The user interface is</text>
<text top="143" left="459" width="343" height="15" font="0">easily accessible both to data and non-data analysts.</text>
<text top="161" left="481" width="40" height="15" font="0">The <a href="http://www.lloyds.com/stats">“</a></text>
<text top="161" left="521" width="200" height="15" font="6"><a href="http://www.lloyds.com/stats">Statistics Relating to Lloyd’s</a></text>
<text top="161" left="721" width="50" height="15" font="0"><a href="http://www.lloyds.com/stats">” </a>site <a href="http://www.lloyds.com/stats">(</a></text>
<text top="162" left="771" width="38" height="12" font="6"><a href="http://www.lloyds.com/stats">http:</a></text>
<text top="180" left="458" width="168" height="12" font="6"><a href="http://www.lloyds.com/stats">//www.lloyds.com/stats</a></text>
<text top="179" left="626" width="180" height="15" font="0"><a href="http://www.lloyds.com/stats">) </a>is an example where the</text>
<text top="197" left="459" width="349" height="15" font="0">functions of the <b>googleVis </b>package were used to cre-</text>
<text top="215" left="459" width="346" height="15" font="0">ate a data visualisation page. Further case studies</text>
<text top="233" left="459" width="346" height="15" font="0">and links to alternative packages are available on the</text>
<text top="251" left="458" width="161" height="15" font="6"><a href="http://code.google.com/p/google-motion-charts-with-r/">project Google Code site</a></text>
<text top="248" left="620" width="6" height="11" font="5"><a href="http://code.google.com/p/google-motion-charts-with-r/">8</a></text>
<text top="251" left="626" width="4" height="15" font="0"><a href="2011-2-RJournal_2011-2_Gesmann+de~Castillo.html#5">.</a></text>
<text top="298" left="459" width="130" height="21" font="4"><b>Bibliography</b></text>
<text top="336" left="459" width="252" height="15" font="0">H. Bengtsson. R.rsp: R server pages.</text>
<text top="338" left="719" width="91" height="12" font="6"><a href="http://CRAN.R-project.org/package=R.rsp">http://CRAN.</a></text>
<text top="356" left="474" width="207" height="12" font="6"><a href="http://CRAN.R-project.org/package=R.rsp">R-project.org/package=R.rsp</a></text>
<text top="354" left="680" width="125" height="15" font="0"><a href="http://CRAN.R-project.org/package=R.rsp">, </a>2011. R package</text>
<text top="372" left="473" width="86" height="15" font="0">version 0.7.0.</text>
<text top="402" left="459" width="346" height="15" font="0">M. Gesmann and D. de Castillo. googleVis: Using</text>
<text top="420" left="474" width="240" height="15" font="0">the Google Visualisation API with R.</text>
<text top="421" left="719" width="91" height="12" font="6"><a href="http://code.google.com/p/google-motion-charts-with-r/">http://code.</a></text>
<text top="439" left="474" width="315" height="12" font="6"><a href="http://code.google.com/p/google-motion-charts-with-r/">google.com/p/google-motion-charts-with-r/</a></text>
<text top="438" left="789" width="4" height="15" font="0"><a href="http://code.google.com/p/google-motion-charts-with-r/">,</a></text>
<text top="456" left="474" width="205" height="15" font="0">2011. R package version 0.2.12.</text>
<text top="486" left="459" width="347" height="15" font="0">Jeffrey Horner. brew: Templating framework for</text>
<text top="504" left="474" width="123" height="15" font="0">report generation.</text>
<text top="505" left="608" width="199" height="12" font="6"><a href="http://CRAN.R-project.org/package=brew">http://CRAN.R-project.org/</a></text>
<text top="523" left="474" width="91" height="12" font="6"><a href="http://CRAN.R-project.org/package=brew">package=brew</a></text>
<text top="522" left="565" width="206" height="15" font="0"><a href="http://CRAN.R-project.org/package=brew">, </a>2011. R package version 1.0-6.</text>
<text top="552" left="459" width="349" height="15" font="0">Jeffrey Horner. RApache: Web application develop-</text>
<text top="570" left="474" width="180" height="15" font="0">ment with R and Apache.</text>
<text top="571" left="666" width="145" height="12" font="6"><a href="http://www.rapache.net/">http://www.rapache.</a></text>
<text top="589" left="474" width="30" height="12" font="6"><a href="http://www.rapache.net/">net/</a></text>
<text top="588" left="504" width="41" height="15" font="0"><a href="http://www.rapache.net/">, </a>2011.</text>
<text top="618" left="459" width="346" height="15" font="0">F. Leisch. Sweave: Dynamic generation of statistical</text>
<text top="636" left="474" width="332" height="15" font="0">reports using literate data analysis. In W. Härdle</text>
<text top="654" left="474" width="332" height="15" font="0">and B. Rönz, editors, Compstat 2002 — Proceedings</text>
<text top="671" left="474" width="332" height="15" font="0">in Computational Statistics, pages 575–580. Physica</text>
<text top="689" left="473" width="302" height="15" font="0">Verlag, Heidelberg, 2002. ISBN 3-7908-1517-9.</text>
<text top="720" left="459" width="346" height="15" font="0">S. P. Saaibi. R/RMETRICS Generator Tool for Google</text>
<text top="737" left="474" width="332" height="15" font="0">Motion Charts. 4th R/Rmetrics User and Developer</text>
<text top="755" left="473" width="334" height="15" font="0">Workshop, Meielisalp, Lake Thune, Switzerland,</text>
<text top="773" left="474" width="136" height="15" font="0">June 27 - July 1, 2010.</text>
<text top="775" left="614" width="191" height="12" font="6"><a href="https://www.rmetrics.org/">https://www.rmetrics.org/</a></text>
<text top="773" left="804" width="4" height="15" font="0"><a href="https://www.rmetrics.org/">.</a></text>
<text top="803" left="459" width="346" height="15" font="0">D. Temple Lang. RJSONIO: Serialize R objects to</text>
<text top="821" left="474" width="234" height="15" font="0">JSON, JavaScript Object Notation.</text>
<text top="823" left="719" width="91" height="12" font="6"><a href="http://CRAN.R-project.org/package=RJSONIO">http://CRAN.</a></text>
<text top="841" left="474" width="222" height="12" font="6"><a href="http://CRAN.R-project.org/package=RJSONIO">R-project.org/package=RJSONIO</a></text>
<text top="839" left="696" width="110" height="15" font="0"><a href="http://CRAN.R-project.org/package=RJSONIO">, </a>2011. R package</text>
<text top="857" left="473" width="95" height="15" font="0">version 0.96-0.</text>
<text top="908" left="459" width="108" height="15" font="0">Markus Gesmann</text>
<text top="926" left="459" width="102" height="15" font="0">googleVis project</text>
<text top="944" left="458" width="46" height="15" font="0">London</text>
<text top="962" left="458" width="22" height="15" font="0">UK</text>
<text top="981" left="459" width="183" height="12" font="6"><a href="mailto:markus.gesmann@gmail.com">markus.gesmann@gmail.com</a></text>
<text top="1034" left="458" width="103" height="15" font="0">Diego de Castillo</text>
<text top="1051" left="459" width="102" height="15" font="0">googleVis project</text>
<text top="1069" left="458" width="49" height="15" font="0">Cologne</text>
<text top="1087" left="458" width="56" height="15" font="0">Germany</text>
<text top="1107" left="459" width="152" height="12" font="6"><a href="mailto:decastillo@gmail.com">decastillo@gmail.com</a></text>
<text top="1173" left="99" width="4" height="9" font="9"><a href="http://code.google.com/p/google-motion-charts-with-r/">8</a></text>
<text top="1176" left="104" width="326" height="9" font="5"><a href="http://code.google.com/p/google-motion-charts-with-r/">http://code.google.com/p/google-motion-charts-with-r/</a></text>
<text top="1218" left="82" width="257" height="15" font="0">The R Journal Vol. 3/2, December 2011</text>
<text top="1218" left="704" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
</pdf2xml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE pdf2xml SYSTEM "pdf2xml.dtd">

<pdf2xml producer="poppler" version="0.30.0">
<page number="1" position="absolute" top="0" left="0" height="1262" width="892">
	<fontspec id="0" size="12" family="Times" color="#000000"/>
	<fontspec id="1" size="9" family="Times" color="#000000"/>
	<fontspec id="2" size="28" family="Times" color="#000000"/>
	<fontspec id="3" size="11" family="Times" color="#000000"/>
	<fontspec id="4" size="11" family="Times" color="#000000"/>
	<fontspec id="5" size="15" family="Times" color="#000000"/>
	<fontspec id="6" size="11" family="Times" color="#7282aa"/>
	<fontspec id="7" size="11" family="Times" color="#7282aa"/>
	<fontspec id="8" size="5" family="Times" color="#000000"/>
	<fontspec id="9" size="5" family="Times" color="#000000"/>
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">144</text>
<text top="98" left="149" width="484" height="30" font="2"><b>ggmap: Spatial Visualization with</b></text>
<text top="137" left="149" width="107" height="30" font="2"><b>ggplot2</b></text>
<text top="173" left="149" width="226" height="15" font="0">by David Kahle and Hadley Wickham</text>
<text top="214" left="148" width="52" height="13" font="3"><b>Abstract</b></text>
<text top="214" left="207" width="538" height="13" font="4">In spatial statistics the ability to visualize data and models superimposed with their basic</text>
<text top="231" left="149" width="595" height="13" font="4">social landmarks and geographic context is invaluable. <b>ggmap </b>is a new tool which enables such</text>
<text top="247" left="148" width="597" height="13" font="4">visualization by combining the spatial information of static maps from Google Maps, OpenStreetMap,</text>
<text top="264" left="149" width="598" height="13" font="4">Stamen Maps or CloudMade Maps with the layered grammar of graphics implementation of <b>ggplot2</b>.</text>
<text top="280" left="149" width="595" height="13" font="4">In addition, several new utility functions are introduced which allow the user to access the Google</text>
<text top="297" left="149" width="596" height="13" font="4">Geocoding, Distance Matrix, and Directions APIs. The result is an easy, consistent and modular</text>
<text top="313" left="149" width="509" height="13" font="4">framework for spatial graphics with several convenient tools for spatial data analysis.</text>
<text top="358" left="149" width="104" height="17" font="5"><b>Introduction</b></text>
<text top="397" left="148" width="596" height="13" font="4">Visualizing spatial data in R can be a challenging task. Fortunately the task is made a good deal easier</text>
<text top="413" left="149" width="260" height="13" font="4">by the data structures and plot methods of</text>
<text top="413" left="412" width="14" height="13" font="6"><a href="http://CRAN.R-project.org/package=sp"><b>sp</b></a></text>
<text top="413" left="427" width="3" height="13" font="4"><a href="http://CRAN.R-project.org/package=sp">,</a></text>
<text top="413" left="434" width="85" height="13" font="6"><a href="http://CRAN.R-project.org/package=RgoogleMaps"><b>RgoogleMaps</b></a></text>
<text top="413" left="519" width="144" height="13" font="4"><a href="http://CRAN.R-project.org/package=RgoogleMaps">, </a>and related packages <a href="2013-1-kahle-wickham.html#17">(</a></text>
<text top="413" left="663" width="81" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Pebesma and</a></text>
<text top="430" left="149" width="43" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Bivand</a></text>
<text top="430" left="192" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="430" left="200" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2006</a></text>
<text top="430" left="227" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">;</a></text>
<text top="430" left="235" width="77" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Bivand et al.</a></text>
<text top="430" left="312" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="430" left="319" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2008</a></text>
<text top="430" left="347" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">;</a></text>
<text top="430" left="354" width="305" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Loecher and Berlin School of Economics and Law</a></text>
<text top="430" left="659" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="430" left="666" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2013</a></text>
<text top="430" left="694" width="51" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">). </a>Using</text>
<text top="446" left="149" width="595" height="13" font="4">those methods, one can plot the basic geographic information of (for instance) a shape file containing</text>
<text top="462" left="148" width="596" height="13" font="4">polygons for areal data or points for point referenced data. However, compared to specialized</text>
<text top="479" left="149" width="598" height="13" font="4">geographic information systems (GISs) such as ESRI’s ArcGIS, which can plot points, polygons, etc.</text>
<text top="495" left="149" width="596" height="13" font="4">on top of maps and satellite imagery with drag-down menus, these visualizations can be pretty</text>
<text top="512" left="149" width="595" height="13" font="4">disappointing. This article details some new methods for the visualization of spatial data in R using</text>
<text top="528" left="149" width="325" height="13" font="4">the layered grammar of graphics implementation of</text>
<text top="528" left="479" width="46" height="13" font="6"><a href="http://CRAN.R-project.org/package=ggplot2"><b>ggplot2</b></a></text>
<text top="528" left="530" width="214" height="13" font="4">in conjunction with the contextual</text>
<text top="545" left="149" width="595" height="13" font="4">information of static maps from Google Maps, OpenStreetMap, Stamen Maps or CloudMade Maps</text>
<text top="561" left="148" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">(</a></text>
<text top="561" left="153" width="55" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Wickham</a></text>
<text top="561" left="208" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="561" left="215" width="26" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2009</a></text>
<text top="561" left="241" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="561" left="247" width="26" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2010</a></text>
<text top="561" left="274" width="273" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">). </a>The result is an easy to use R package named</text>
<text top="561" left="550" width="42" height="13" font="6"><a href="http://CRAN.R-project.org/package=ggmap"><b>ggmap</b></a></text>
<text top="561" left="592" width="152" height="13" font="4"><a href="http://CRAN.R-project.org/package=ggmap">. </a>After describing the nuts</text>
<text top="577" left="149" width="595" height="13" font="4">and bolts of <b>ggmap</b>, we showcase some of its capabilities in a simple case study concerning violent</text>
<text top="594" left="149" width="521" height="13" font="4">crimes in downtown Houston, Texas and present an overview of a few utility functions.</text>
<text top="639" left="149" width="203" height="17" font="5"><b>Plotting spatial data in R</b></text>
<text top="678" left="148" width="596" height="13" font="4">Areal data is data which corresponds to geographical extents with polygonal boundaries. A typical</text>
<text top="694" left="149" width="597" height="13" font="4">example is the number of residents per zip code. Considering only the boundaries of the areal units,</text>
<text top="710" left="148" width="409" height="13" font="4">we are used to seeing areal plots in R which resemble those in Figure</text>
<text top="710" left="560" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#1">1</a></text>
<text top="710" left="570" width="32" height="13" font="4">(left).</text>
<text top="976" left="216" width="16" height="8" font="8">-96.0</text>
<text top="976" left="281" width="16" height="8" font="8">-95.5</text>
<text top="976" left="346" width="16" height="8" font="8">-95.0</text>
<text top="976" left="412" width="16" height="8" font="8">-94.5</text>
<text top="959" left="173" width="0" height="8" font="9">29.0</text>
<text top="892" left="173" width="0" height="8" font="9">29.5</text>
<text top="825" left="173" width="0" height="8" font="9">30.0</text>
<text top="758" left="173" width="0" height="8" font="9">30.5</text>
<text top="993" left="292" width="29" height="8" font="8">longitude</text>
<text top="863" left="156" width="0" height="8" font="9">latitude</text>
<text top="978" left="513" width="16" height="8" font="8">-96.0</text>
<text top="978" left="579" width="16" height="8" font="8">-95.5</text>
<text top="978" left="644" width="16" height="8" font="8">-95.0</text>
<text top="978" left="709" width="16" height="8" font="8">-94.5</text>
<text top="961" left="471" width="0" height="8" font="9">29.0</text>
<text top="893" left="471" width="0" height="8" font="9">29.5</text>
<text top="826" left="471" width="0" height="8" font="9">30.0</text>
<text top="759" left="471" width="0" height="8" font="9">30.5</text>
<text top="995" left="589" width="29" height="8" font="8">longitude</text>
<text top="864" left="454" width="0" height="8" font="9">latitude</text>
<text top="1021" left="149" width="53" height="13" font="3"><b>Figure 1:</b></text>
<text top="1021" left="206" width="538" height="13" font="4">A typical R areal plot – zip codes in the Greater Houston area (left), and a typical R spatial</text>
<text top="1038" left="149" width="447" height="13" font="4">scatterplot – murders in Houston from January 2010 to August 2010 (right).</text>
<text top="1073" left="148" width="598" height="13" font="4">While these kinds of plots are useful, they are not as informative as we would like in many situations.</text>
<text top="1090" left="149" width="595" height="13" font="4">For instance, when plotting zip codes it is helpful to also see major roads and other landmarks which</text>
<text top="1106" left="149" width="206" height="13" font="4">form the boundaries of areal units.</text>
<text top="1127" left="171" width="575" height="13" font="4">The situation for point referenced spatial data is often much worse. Since we can’t easily contextu-</text>
<text top="1143" left="149" width="595" height="13" font="4">alize a scatterplot of points without any background information at all, it is common to add points as</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="2" position="absolute" top="0" left="0" height="1262" width="892">
	<fontspec id="10" size="13" family="Times" color="#000000"/>
	<fontspec id="11" size="4" family="Times" color="#ff0000"/>
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">145</text>
<text top="103" left="149" width="586" height="13" font="4">an overlay of some areal data—whatever areal data is available. The resulting plot looks like Figure</text>
<text top="103" left="738" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#1">1</a></text>
<text top="120" left="148" width="41" height="13" font="4">(right).</text>
<text top="141" left="171" width="573" height="13" font="4">In most cases the plot is understandable to the researcher who has worked on the problem for</text>
<text top="157" left="149" width="595" height="13" font="4">some time but is of hardly any use to his audience, who must work to associate the data of interest</text>
<text top="173" left="148" width="596" height="13" font="4">with their location. Moreover, it leaves out many practical details—are most of the events to the east</text>
<text top="190" left="149" width="595" height="13" font="4">or west of landmark x? Are they clustered around more well-to-do parts of town, or do they tend</text>
<text top="206" left="149" width="595" height="13" font="4">to occur in disadvantaged areas? Questions like these can’t really be answered using these kinds of</text>
<text top="223" left="149" width="595" height="13" font="4">graphics because we don’t think in terms of small scale areal boundaries (e.g. zip codes or census</text>
<text top="239" left="149" width="40" height="13" font="4">tracts).</text>
<text top="260" left="171" width="348" height="13" font="4">With a little effort better plots can be made, and tools such as</text>
<text top="260" left="521" width="33" height="13" font="6"><a href="http://CRAN.R-project.org/package=maps"><b>maps</b></a></text>
<text top="260" left="554" width="3" height="13" font="4"><a href="http://CRAN.R-project.org/package=maps">,</a></text>
<text top="260" left="560" width="57" height="13" font="6"><a href="http://CRAN.R-project.org/package=maptools"><b>maptools</b></a></text>
<text top="260" left="617" width="127" height="13" font="4"><a href="http://CRAN.R-project.org/package=maptools">, </a><b>sp</b>, or <b>RgoogleMaps</b></text>
<text top="276" left="149" width="519" height="13" font="4">make the process much easier; in fact, <b>RgoogleMaps </b>was the inspiration for <b>ggmap </b><a href="2013-1-kahle-wickham.html#17">(</a></text>
<text top="276" left="668" width="74" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Becker et al.</a></text>
<text top="276" left="742" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="293" left="149" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2013</a></text>
<text top="293" left="176" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">;</a></text>
<text top="293" left="182" width="139" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Bivand and Lewin-Koh</a></text>
<text top="293" left="321" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="293" left="328" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2013</a></text>
<text top="293" left="355" width="8" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">).</a></text>
<text top="314" left="171" width="573" height="13" font="4">Moreover, there has recently been a deluge of interest in the subject of mapmaking in R—Ian</text>
<text top="330" left="149" width="252" height="13" font="4">Fellows’ excellent interactive GUI-driven</text>
<text top="330" left="405" width="96" height="13" font="6"><a href="http://CRAN.R-project.org/package=DeducerSpatial"><b>DeducerSpatial</b></a></text>
<text top="330" left="505" width="239" height="13" font="4">package based on Bing Maps comes to</text>
<text top="347" left="149" width="41" height="13" font="4">mind <a href="2013-1-kahle-wickham.html#17">(</a></text>
<text top="347" left="190" width="80" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Fellows et al.</a></text>
<text top="347" left="270" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="347" left="278" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2013</a></text>
<text top="347" left="305" width="439" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">). </a><b>ggmap </b>takes another step in this direction by situating the contextual</text>
<text top="363" left="149" width="597" height="13" font="4">information of various kinds of static maps in the <b>ggplot2 </b>plotting framework. The result is an easy,</text>
<text top="380" left="149" width="595" height="13" font="4">consistent way of specifying plots which are readily interpretable by both expert and audience and</text>
<text top="396" left="149" width="595" height="13" font="4">safeguarded from graphical inconsistencies by the layered grammar of graphics framework. The result</text>
<text top="412" left="149" width="199" height="13" font="4">is a spatial plot resembling Figure</text>
<text top="412" left="352" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#2">2</a></text>
<text top="412" left="358" width="386" height="13" font="4"><a href="2013-1-kahle-wickham.html#2">. </a>Note that map images and information in this work may appear</text>
<text top="429" left="149" width="340" height="13" font="4">slightly different due to map provider changes over time.</text>
<text top="460" left="149" width="335" height="13" font="10">murder &lt;- subset(crime, offense == &#34;murder&#34;)</text>
<text top="478" left="149" width="579" height="13" font="10">qmplot(lon, lat, data = murder, colour = I(’red’), size = I(3), darken = .3)</text>
<text top="750" left="423" width="5" height="6" font="11">●</text>
<text top="536" left="422" width="5" height="6" font="11">●</text>
<text top="753" left="338" width="5" height="6" font="11">●</text>
<text top="592" left="430" width="5" height="6" font="11">●</text>
<text top="603" left="537" width="5" height="6" font="11">●</text>
<text top="707" left="484" width="5" height="6" font="11">●</text>
<text top="638" left="516" width="5" height="6" font="11">●</text>
<text top="736" left="535" width="5" height="6" font="11">●</text>
<text top="650" left="370" width="5" height="6" font="11">●</text>
<text top="675" left="446" width="5" height="6" font="11">●</text>
<text top="729" left="472" width="5" height="6" font="11">●</text>
<text top="704" left="479" width="5" height="6" font="11">●</text>
<text top="704" left="459" width="5" height="6" font="11">●</text>
<text top="622" left="518" width="5" height="6" font="11">●</text>
<text top="745" left="344" width="5" height="6" font="11">●</text>
<text top="798" left="530" width="5" height="6" font="11">●</text>
<text top="704" left="422" width="5" height="6" font="11">●</text>
<text top="721" left="346" width="5" height="6" font="11">●</text>
<text top="709" left="361" width="5" height="6" font="11">●</text>
<text top="773" left="488" width="5" height="6" font="11">●</text>
<text top="616" left="533" width="5" height="6" font="11">●</text>
<text top="819" left="603" width="5" height="6" font="11">●</text>
<text top="678" left="506" width="5" height="6" font="11">●</text>
<text top="815" left="397" width="5" height="6" font="11">●</text>
<text top="644" left="390" width="5" height="6" font="11">●</text>
<text top="572" left="440" width="5" height="6" font="11">●</text>
<text top="642" left="467" width="5" height="6" font="11">●</text>
<text top="657" left="352" width="5" height="6" font="11">●</text>
<text top="627" left="376" width="5" height="6" font="11">●</text>
<text top="642" left="452" width="5" height="6" font="11">●</text>
<text top="591" left="377" width="5" height="6" font="11">●</text>
<text top="625" left="510" width="5" height="6" font="11">●</text>
<text top="757" left="355" width="5" height="6" font="11">●</text>
<text top="757" left="376" width="5" height="6" font="11">●</text>
<text top="741" left="327" width="5" height="6" font="11">●</text>
<text top="807" left="529" width="5" height="6" font="11">●</text>
<text top="752" left="531" width="5" height="6" font="11">●</text>
<text top="794" left="427" width="5" height="6" font="11">●</text>
<text top="733" left="514" width="5" height="6" font="11">●</text>
<text top="608" left="548" width="5" height="6" font="11">●</text>
<text top="769" left="535" width="5" height="6" font="11">●</text>
<text top="784" left="562" width="5" height="6" font="11">●</text>
<text top="720" left="537" width="5" height="6" font="11">●</text>
<text top="612" left="393" width="5" height="6" font="11">●</text>
<text top="740" left="355" width="5" height="6" font="11">●</text>
<text top="696" left="467" width="5" height="6" font="11">●</text>
<text top="536" left="422" width="5" height="6" font="11">●</text>
<text top="545" left="449" width="5" height="6" font="11">●</text>
<text top="748" left="436" width="5" height="6" font="11">●</text>
<text top="802" left="445" width="5" height="6" font="11">●</text>
<text top="764" left="476" width="5" height="6" font="11">●</text>
<text top="736" left="493" width="5" height="6" font="11">●</text>
<text top="735" left="322" width="5" height="6" font="11">●</text>
<text top="729" left="560" width="5" height="6" font="11">●</text>
<text top="758" left="487" width="5" height="6" font="11">●</text>
<text top="677" left="523" width="5" height="6" font="11">●</text>
<text top="759" left="512" width="5" height="6" font="11">●</text>
<text top="716" left="482" width="5" height="6" font="11">●</text>
<text top="732" left="318" width="5" height="6" font="11">●</text>
<text top="770" left="339" width="5" height="6" font="11">●</text>
<text top="743" left="495" width="5" height="6" font="11">●</text>
<text top="763" left="538" width="5" height="6" font="11">●</text>
<text top="696" left="373" width="5" height="6" font="11">●</text>
<text top="735" left="312" width="5" height="6" font="11">●</text>
<text top="698" left="490" width="5" height="6" font="11">●</text>
<text top="701" left="320" width="5" height="6" font="11">●</text>
<text top="741" left="322" width="5" height="6" font="11">●</text>
<text top="694" left="477" width="5" height="6" font="11">●</text>
<text top="756" left="552" width="5" height="6" font="11">●</text>
<text top="619" left="492" width="5" height="6" font="11">●</text>
<text top="693" left="378" width="5" height="6" font="11">●</text>
<text top="720" left="539" width="5" height="6" font="11">●</text>
<text top="818" left="389" width="5" height="6" font="11">●</text>
<text top="752" left="488" width="5" height="6" font="11">●</text>
<text top="629" left="445" width="5" height="6" font="11">●</text>
<text top="715" left="442" width="5" height="6" font="11">●</text>
<text top="611" left="395" width="5" height="6" font="11">●</text>
<text top="744" left="523" width="5" height="6" font="11">●</text>
<text top="700" left="374" width="5" height="6" font="11">●</text>
<text top="647" left="387" width="5" height="6" font="11">●</text>
<text top="638" left="408" width="5" height="6" font="11">●</text>
<text top="688" left="472" width="5" height="6" font="11">●</text>
<text top="666" left="314" width="5" height="6" font="11">●</text>
<text top="640" left="583" width="5" height="6" font="11">●</text>
<text top="714" left="350" width="5" height="6" font="11">●</text>
<text top="738" left="314" width="5" height="6" font="11">●</text>
<text top="771" left="481" width="5" height="6" font="11">●</text>
<text top="781" left="476" width="5" height="6" font="11">●</text>
<text top="596" left="397" width="5" height="6" font="11">●</text>
<text top="819" left="572" width="5" height="6" font="11">●</text>
<text top="664" left="398" width="5" height="6" font="11">●</text>
<text top="533" left="445" width="5" height="6" font="11">●</text>
<text top="659" left="351" width="5" height="6" font="11">●</text>
<text top="736" left="353" width="5" height="6" font="11">●</text>
<text top="702" left="312" width="5" height="6" font="11">●</text>
<text top="790" left="385" width="5" height="6" font="11">●</text>
<text top="694" left="355" width="5" height="6" font="11">●</text>
<text top="612" left="395" width="5" height="6" font="11">●</text>
<text top="787" left="536" width="5" height="6" font="11">●</text>
<text top="751" left="376" width="5" height="6" font="11">●</text>
<text top="720" left="537" width="5" height="6" font="11">●</text>
<text top="777" left="560" width="5" height="6" font="11">●</text>
<text top="737" left="546" width="5" height="6" font="11">●</text>
<text top="657" left="398" width="5" height="6" font="11">●</text>
<text top="710" left="426" width="5" height="6" font="11">●</text>
<text top="640" left="414" width="5" height="6" font="11">●</text>
<text top="763" left="312" width="5" height="6" font="11">●</text>
<text top="770" left="339" width="5" height="6" font="11">●</text>
<text top="612" left="530" width="5" height="6" font="11">●</text>
<text top="541" left="534" width="5" height="6" font="11">●</text>
<text top="806" left="434" width="5" height="6" font="11">●</text>
<text top="601" left="469" width="5" height="6" font="11">●</text>
<text top="763" left="325" width="5" height="6" font="11">●</text>
<text top="647" left="460" width="5" height="6" font="11">●</text>
<text top="622" left="469" width="5" height="6" font="11">●</text>
<text top="737" left="519" width="5" height="6" font="11">●</text>
<text top="639" left="481" width="5" height="6" font="11">●</text>
<text top="719" left="470" width="5" height="6" font="11">●</text>
<text top="658" left="445" width="5" height="6" font="11">●</text>
<text top="734" left="489" width="5" height="6" font="11">●</text>
<text top="742" left="357" width="5" height="6" font="11">●</text>
<text top="749" left="308" width="5" height="6" font="11">●</text>
<text top="718" left="464" width="5" height="6" font="11">●</text>
<text top="664" left="494" width="5" height="6" font="11">●</text>
<text top="703" left="500" width="5" height="6" font="11">●</text>
<text top="706" left="286" width="5" height="6" font="11">●</text>
<text top="741" left="472" width="5" height="6" font="11">●</text>
<text top="746" left="309" width="5" height="6" font="11">●</text>
<text top="708" left="480" width="5" height="6" font="11">●</text>
<text top="804" left="354" width="5" height="6" font="11">●</text>
<text top="699" left="367" width="5" height="6" font="11">●</text>
<text top="695" left="464" width="5" height="6" font="11">●</text>
<text top="622" left="358" width="5" height="6" font="11">●</text>
<text top="784" left="384" width="5" height="6" font="11">●</text>
<text top="702" left="374" width="5" height="6" font="11">●</text>
<text top="788" left="492" width="5" height="6" font="11">●</text>
<text top="804" left="354" width="5" height="6" font="11">●</text>
<text top="519" left="431" width="5" height="6" font="11">●</text>
<text top="710" left="465" width="5" height="6" font="11">●</text>
<text top="528" left="458" width="5" height="6" font="11">●</text>
<text top="820" left="402" width="5" height="6" font="11">●</text>
<text top="719" left="306" width="5" height="6" font="11">●</text>
<text top="723" left="511" width="5" height="6" font="11">●</text>
<text top="754" left="413" width="5" height="6" font="11">●</text>
<text top="723" left="511" width="5" height="6" font="11">●</text>
<text top="583" left="432" width="5" height="6" font="11">●</text>
<text top="653" left="361" width="5" height="6" font="11">●</text>
<text top="783" left="502" width="5" height="6" font="11">●</text>
<text top="721" left="366" width="5" height="6" font="11">●</text>
<text top="753" left="335" width="5" height="6" font="11">●</text>
<text top="768" left="377" width="5" height="6" font="11">●</text>
<text top="709" left="336" width="5" height="6" font="11">●</text>
<text top="769" left="373" width="5" height="6" font="11">●</text>
<text top="619" left="369" width="5" height="6" font="11">●</text>
<text top="701" left="338" width="5" height="6" font="11">●</text>
<text top="632" left="454" width="5" height="6" font="11">●</text>
<text top="722" left="522" width="5" height="6" font="11">●</text>
<text top="870" left="149" width="53" height="13" font="3"><b>Figure 2:</b></text>
<text top="870" left="206" width="540" height="13" font="4">A spatial scatterplot based on Stamen Maps’ terrain tile set made with the qmplot function,</text>
<text top="887" left="149" width="427" height="13" font="4">an experimental amalgamation of the functions presented in this article.</text>
<text top="945" left="149" width="271" height="17" font="5"><b>The layered grammar of graphics</b></text>
<text top="984" left="149" width="595" height="13" font="4">One advantage of making the plots with <b>ggplot2 </b>is the layered grammar of graphics on which <b>ggplot2</b></text>
<text top="1000" left="149" width="56" height="13" font="4">is based <a href="2013-1-kahle-wickham.html#17">(</a></text>
<text top="1000" left="205" width="57" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Wickham</a></text>
<text top="1000" left="262" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="1000" left="269" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2010</a></text>
<text top="1000" left="296" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">;</a></text>
<text top="1000" left="303" width="61" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Wilkinson</a></text>
<text top="1000" left="364" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="1000" left="371" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2005</a></text>
<text top="1000" left="398" width="346" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">). </a>By definition, the layered grammar demands that every</text>
<text top="1017" left="148" width="192" height="13" font="4">plot consist of five components :</text>
<text top="1043" left="171" width="266" height="13" font="4">• a default dataset with aesthetic mappings,</text>
<text top="1065" left="171" width="575" height="13" font="4">• one or more layers, each with a geometric object (“geom”), a statistical transformation (“stat”),</text>
<text top="1081" left="186" width="353" height="13" font="4">and a dataset with aesthetic mappings (possibly defaulted),</text>
<text top="1103" left="171" width="459" height="13" font="4">• a scale for each aesthetic mapping (which can be automatically generated),</text>
<text top="1125" left="171" width="163" height="13" font="4">• a coordinate system, and</text>
<text top="1147" left="171" width="135" height="13" font="4">• a facet specification.</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="3" position="absolute" top="0" left="0" height="1262" width="892">
	<fontspec id="12" size="8" family="Times" color="#7282aa"/>
	<fontspec id="13" size="12" family="Times" color="#000000"/>
	<fontspec id="14" size="6" family="Times" color="#000000"/>
	<fontspec id="15" size="10" family="Times" color="#000000"/>
	<fontspec id="16" size="7" family="Times" color="#000000"/>
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">146</text>
<text top="103" left="149" width="595" height="13" font="4">Since <b>ggplot2 </b>is an implementation of the layered grammar of graphics, every plot made with <b>ggplot2</b></text>
<text top="120" left="149" width="595" height="13" font="4">has each of the above elements. Consequently, <b>ggmap </b>plots also have these elements, but certain</text>
<text top="136" left="149" width="595" height="13" font="4">elements are fixed to map components : the x aesthetic is fixed to longitude, the y aesthetic is fixed to</text>
<text top="152" left="149" width="416" height="13" font="4">latitude, and the coordinate system is fixed to the Mercator pr<a href="2013-1-kahle-wickham.html#0">ojection.</a></text>
<text top="150" left="565" width="5" height="10" font="12"><a href="2013-1-kahle-wickham.html#0">1</a></text>
<text top="173" left="171" width="573" height="13" font="4">The major theoretical advantage of using the layered grammar in plotting maps is that aesthetic</text>
<text top="190" left="149" width="595" height="13" font="4">scales are kept consistent. In the typical situation where the map covers the extent of the data, in</text>
<text top="206" left="149" width="42" height="13" font="3"><b>ggmap</b></text>
<text top="206" left="194" width="550" height="13" font="4">the latitude and longitude scales key off the map (by default) and one scale is used for those</text>
<text top="223" left="149" width="595" height="13" font="4">axes. The same is true of colors, fills, alpha blendings, and other aesthetics which are built on top of</text>
<text top="239" left="149" width="595" height="13" font="4">the map when other layers are presented—each is allotted one scale which is kept consistent across</text>
<text top="256" left="149" width="596" height="13" font="4">each layer of the plot. This aspect of the grammar is particularly important for faceted plots in order</text>
<text top="272" left="149" width="596" height="13" font="4">to make a proper comparison across several plots. Of course, the scales can still be tricked if the user</text>
<text top="288" left="149" width="595" height="13" font="4">improperly specifies the spatial data, e.g. using more than one projection in the same map, but fixing</text>
<text top="305" left="149" width="226" height="13" font="4">such errors is beyond any framework.</text>
<text top="326" left="171" width="573" height="13" font="4">The practical advantage of using the grammar is even better. Since the graphics are done in <b>ggplot2</b></text>
<text top="342" left="149" width="597" height="13" font="4">the user can draw from the full range of <b>ggplot2</b>’s capabilities to layer elegant visual content—geoms,</text>
<text top="359" left="149" width="595" height="13" font="4">stats, scales, etc.—using the usual <b>ggplot2 </b>coding conventions. This was already seen briefly in Figure</text>
<text top="375" left="149" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#2">2</a></text>
<text top="375" left="160" width="584" height="13" font="4">where the arguments of qmplot are identical to that of <b>ggplot2</b>’s qplot; much more will be seen</text>
<text top="392" left="149" width="44" height="13" font="4">shortly.</text>
<text top="435" left="149" width="155" height="17" font="5"><b>How ggmap works</b></text>
<text top="474" left="148" width="596" height="13" font="4">The basic idea driving <b>ggmap </b>is to take a downloaded map image, plot it as a context layer using</text>
<text top="491" left="149" width="46" height="13" font="3"><b>ggplot2</b></text>
<text top="491" left="195" width="549" height="13" font="4">, and then plot additional content layers of data, statistics, or models on top of the map. In</text>
<text top="507" left="149" width="42" height="13" font="3"><b>ggmap</b></text>
<text top="507" left="195" width="549" height="13" font="4">this process is broken into two pieces – (1) downloading the images and formatting them</text>
<text top="524" left="149" width="595" height="13" font="4">for plotting, done with get_map, and (2) making the plot, done with ggmap. qmap marries these two</text>
<text top="540" left="149" width="595" height="13" font="4">functions for quick map plotting (c.f. <b>ggplot2</b>’s ggplot), and qmplot attempts to wrap up the entire</text>
<text top="556" left="148" width="383" height="13" font="4">plotting process into one simple command (c.f. <b>ggplot2</b>’s qplot).</text>
<text top="598" left="149" width="27" height="15" font="13"><b>The</b></text>
<text top="598" left="179" width="53" height="13" font="10">get_map</text>
<text top="598" left="236" width="58" height="15" font="13"><b>function</b></text>
<text top="629" left="149" width="595" height="13" font="4">In <b>ggmap</b>, downloading a map as an image and formatting the image for plotting is done with the</text>
<text top="646" left="149" width="48" height="11" font="4">get_map</text>
<text top="646" left="202" width="542" height="13" font="4">function. More specifically, get_map is a wrapper function for the underlying functions</text>
<text top="663" left="149" width="89" height="11" font="4">get_googlemap</text>
<text top="662" left="238" width="506" height="13" font="4">, get_openstreetmap, get_stamenmap, and get_cloudmademap which accepts a wide</text>
<text top="679" left="149" width="460" height="13" font="4">array of arguments and returns a classed raster object for plotting with ggmap.</text>
<text top="699" left="171" width="573" height="13" font="4">As the most important characteristic of any map is location, the most important argument of</text>
<text top="717" left="149" width="48" height="11" font="4">get_map</text>
<text top="716" left="200" width="544" height="13" font="4">is the location argument. Ideally, location is a longitude/latitude pair specifying the center</text>
<text top="732" left="149" width="595" height="13" font="4">of the map and accompanied by a zoom argument, an integer from 3 to 20 specifying how large the</text>
<text top="749" left="149" width="595" height="13" font="4">spatial extent should be around the center, with 3 being the continent level and 20 being roughly the</text>
<text top="765" left="149" width="595" height="13" font="4">single building level. location is defaulted to downtown Houston, Texas, and zoom to 10, roughly a</text>
<text top="782" left="149" width="58" height="13" font="4">city-scale.</text>
<text top="803" left="171" width="573" height="13" font="4">While longitude/latitude pairs are ideal for specifying a location, they are somewhat inconvenient</text>
<text top="819" left="149" width="596" height="13" font="4">on a practical level. For this reason, location also accepts a character string. The string, whether</text>
<text top="835" left="149" width="595" height="13" font="4">containing an address, zip code, or proper name, is then passed to the geocode function which then</text>
<text top="852" left="149" width="595" height="13" font="4">determines the appropriate longitude/latitude coordinate for the center. In other words, there is</text>
<text top="868" left="149" width="595" height="13" font="4">no need to know the exact longitude/latitude coordinates of the center of the map—get_map can</text>
<text top="885" left="149" width="598" height="13" font="4">determine them from more colloquial (“lazy”) specifications so that they can be specified very loosely.</text>
<text top="901" left="149" width="111" height="13" font="4">For example, since</text>
<text top="926" left="149" width="192" height="11" font="4">&gt; geocode(&#34;the white house&#34;)</text>
<text top="943" left="190" width="21" height="11" font="4">lon</text>
<text top="943" left="259" width="21" height="11" font="4">lat</text>
<text top="959" left="149" width="62" height="11" font="4">-77.03676</text>
<text top="959" left="224" width="55" height="11" font="4">38.89784</text>
<text top="983" left="148" width="596" height="13" font="4">works, &#34;the white house&#34; is a viable location argument. More details on geocode and other utility</text>
<text top="1000" left="149" width="285" height="13" font="4">functions are discussed at the end of this article.</text>
<text top="1021" left="171" width="575" height="13" font="4">In lieu of a center/zoom specification, some users find a bounding box specification more conve-</text>
<text top="1037" left="149" width="596" height="13" font="4">nient. To accommodate this form of specification, location also accepts numeric vectors of length four</text>
<text top="1053" left="149" width="595" height="13" font="4">following the left/bottom/right/top convention. This option is not currently available for Google</text>
<text top="1070" left="149" width="37" height="13" font="4">Maps.</text>
<text top="1091" left="171" width="573" height="13" font="4">While each map source has its own web application programming interface (API), specification</text>
<text top="1107" left="149" width="597" height="13" font="4">of location/zoom in get_map works for each by computing the appropriate parameters (if necessary)</text>
<text top="1132" left="165" width="4" height="9" font="14">1</text>
<text top="1134" left="170" width="302" height="12" font="1">Note that because of the Mercator projection limitations in</text>
<text top="1134" left="475" width="61" height="10" font="15">mapproject</text>
<text top="1134" left="536" width="125" height="12" font="1">, anything above/below</text>
<text top="1133" left="664" width="10" height="15" font="15">±</text>
<text top="1134" left="674" width="12" height="12" font="1">80</text>
<text top="1131" left="686" width="5" height="11" font="16">◦</text>
<text top="1134" left="694" width="50" height="12" font="1">cannot be</text>
<text top="1148" left="148" width="91" height="12" font="1">plotted currently.</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="4" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">147</text>
<text top="103" left="149" width="595" height="13" font="4">and passing them to each of the API specific get_* functions. To ensure that the resulting maps are</text>
<text top="120" left="149" width="595" height="13" font="4">the same across the various sources for the same location/zoom specification, get_map first grabs the</text>
<text top="136" left="149" width="598" height="13" font="4">appropriate Google Map, determines its bounding box, and then downloads the other map as needed.</text>
<text top="152" left="149" width="595" height="13" font="4">In the case of Stamen Maps and CloudMade Maps, this involves a stitching process of combining</text>
<text top="169" left="149" width="595" height="13" font="4">several tiles (small map images) and then cropping the result to the appropriate bounding box. The</text>
<text top="185" left="149" width="595" height="13" font="4">result is a single, consistent specification syntax across the four map sources as seen for Google Maps</text>
<text top="202" left="149" width="177" height="13" font="4">and OpenStreetMap in Figure</text>
<text top="202" left="330" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#4">3</a></text>
<text top="202" left="336" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#4">.</a></text>
<text top="233" left="149" width="221" height="13" font="10">baylor &lt;- &#34;baylor university&#34;</text>
<text top="251" left="149" width="175" height="13" font="10">qmap(baylor, zoom = 14)</text>
<text top="597" left="149" width="297" height="13" font="10">qmap(baylor, zoom = 14, source = &#34;osm&#34;)</text>
<text top="953" left="149" width="110" height="13" font="3"><b>Figure 3: </b>get_map</text>
<text top="953" left="264" width="480" height="13" font="4">provides the same spatial extent for Google Maps (top) and OpenStreetMaps</text>
<text top="969" left="148" width="475" height="13" font="4">(bottom) with a single simple syntax, even though their APIs are quite different.</text>
<text top="1005" left="171" width="573" height="13" font="4">Before moving into the source and maptype arguments, it is important to note that the underlying</text>
<text top="1021" left="148" width="596" height="13" font="4">API specific get_* functions for which get_map is a wrapper provide more extensive mechanisms for</text>
<text top="1037" left="149" width="595" height="13" font="4">downloading from their respective sources. For example, get_googlemap can access almost the full</text>
<text top="1054" left="149" width="319" height="13" font="4">range of the Google Static Maps API as seen in Figure</text>
<text top="1054" left="471" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#5">4</a></text>
<text top="1054" left="477" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#5">.</a></text>
<text top="1096" left="149" width="99" height="15" font="13"><b>Tile style – the</b></text>
<text top="1097" left="252" width="46" height="13" font="10">source</text>
<text top="1096" left="301" width="26" height="15" font="13"><b>and</b></text>
<text top="1097" left="331" width="53" height="13" font="10">maptype</text>
<text top="1096" left="388" width="90" height="15" font="13"><b>arguments of</b></text>
<text top="1097" left="482" width="53" height="13" font="10">get_map</text>
<text top="1128" left="148" width="596" height="13" font="4">The most attractive aspect of using different map sources (Google Maps, OpenStreetMap, Stamen</text>
<text top="1144" left="149" width="595" height="13" font="4">Maps, and CloudMade Maps) is the different map styles provided by the producer. These are specified</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="5" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">148</text>
<text top="345" left="149" width="99" height="13" font="10">set.seed(500)</text>
<text top="363" left="149" width="175" height="13" font="10">df &lt;- round(data.frame(</text>
<text top="380" left="164" width="312" height="13" font="10">x = jitter(rep(-95.36, 50), amount = .3),</text>
<text top="398" left="164" width="305" height="13" font="10">y = jitter(rep( 29.76, 50), amount = .3)</text>
<text top="416" left="149" width="107" height="13" font="10">), digits = 2)</text>
<text top="452" left="149" width="511" height="13" font="10">map &lt;- get_googlemap(’houston’, markers = df, path = df, scale = 2)</text>
<text top="488" left="149" width="221" height="13" font="10">ggmap(map, extent = ’device’)</text>
<text top="895" left="245" width="53" height="13" font="3"><b>Figure 4:</b></text>
<text top="895" left="302" width="346" height="13" font="4">Accessing Google Maps API features with get_googlemap.</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="6" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">149</text>
<text top="103" left="148" width="596" height="13" font="4">with the maptype argument of get_map and must agree with the source argument. Some styles</text>
<text top="120" left="149" width="595" height="13" font="4">emphasize large roadways, others bodies of water, and still others political boundaries. Some are</text>
<text top="136" left="149" width="595" height="13" font="4">better for plotting in a black-and-white medium; others are simply nice to look at. This section gives a</text>
<text top="152" left="149" width="332" height="13" font="4">run down of the various map styles available in <b>ggmap</b>.</text>
<text top="173" left="171" width="491" height="13" font="4">Google provides four different familiar types—terrain (default), satellite (e.g. Figure</text>
<text top="173" left="665" width="13" height="13" font="7"><a href="2013-1-kahle-wickham.html#16">13</a></text>
<text top="173" left="678" width="67" height="13" font="4"><a href="2013-1-kahle-wickham.html#16">), </a>roadmap,</text>
<text top="190" left="149" width="135" height="13" font="4">and hybrid (e.g. Figure</text>
<text top="190" left="288" width="13" height="13" font="7"><a href="2013-1-kahle-wickham.html#15">12</a></text>
<text top="190" left="301" width="443" height="13" font="4"><a href="2013-1-kahle-wickham.html#15">). </a>OpenStreetMap, on the other hand, only provides the default style shown</text>
<text top="206" left="149" width="54" height="13" font="4">in Figure</text>
<text top="206" left="206" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#4">3</a></text>
<text top="206" left="213" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#4">.</a></text>
<text top="227" left="171" width="573" height="13" font="4">Style is where Stamen Maps and CloudMade Maps really shine. Stamen Maps has three available</text>
<text top="244" left="149" width="174" height="13" font="4">tile sets—terrain (e.g. Figures</text>
<text top="244" left="327" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#2">2</a></text>
<text top="244" left="337" width="13" height="13" font="4">or</text>
<text top="244" left="353" width="13" height="13" font="7"><a href="2013-1-kahle-wickham.html#16">13</a></text>
<text top="244" left="366" width="310" height="13" font="4"><a href="2013-1-kahle-wickham.html#16">), </a>watercolor, and toner (for the latter two see Figure</text>
<text top="244" left="679" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#6">5</a></text>
<text top="244" left="686" width="8" height="13" font="4"><a href="2013-1-kahle-wickham.html#6">).</a></text>
<text top="274" left="149" width="503" height="13" font="10">qmap(baylor, zoom = 14, source = &#34;stamen&#34;, maptype = &#34;watercolor&#34;)</text>
<text top="292" left="149" width="465" height="13" font="10">qmap(baylor, zoom = 14, source = &#34;stamen&#34;, maptype = &#34;toner&#34;)</text>
<text top="636" left="220" width="53" height="13" font="3"><b>Figure 5:</b></text>
<text top="636" left="277" width="396" height="13" font="4">Stamen tile sets maptype = &#34;watercolor&#34; and maptype = &#34;toner&#34;.</text>
<text top="670" left="171" width="573" height="13" font="4">Stamen’s terrain tile set is quite similar to Google’s, but obviously the watercolor and toner tile</text>
<text top="687" left="149" width="596" height="13" font="4">sets are substantially different than any of the four Google tile sets. The latter, for example, is ideal for</text>
<text top="703" left="149" width="151" height="13" font="4">black-and-white plotting.</text>
<text top="724" left="171" width="573" height="13" font="4">CloudMade Maps takes the tile styling even further by allowing the user to either (1) select among</text>
<text top="740" left="149" width="595" height="14" font="4">thousands of user-made sets or (2) create an entirely new style with a simple online editor where the</text>
<text top="757" left="149" width="597" height="13" font="4">user can specify colors, lines, and so forth for various types of roads, waterways, landmarks, etc.,</text>
<text top="773" left="149" width="596" height="13" font="4">all of which are generated by CloudMade and accessible in <b>ggmap</b>. <b>ggmap</b>, through get_map (or</text>
<text top="790" left="149" width="110" height="11" font="4">get_cloudmademap</text>
<text top="790" left="259" width="486" height="13" font="4">) allows for both options. This is a unique feature of CloudMade Maps which really</text>
<text top="806" left="149" width="595" height="13" font="4">boosts their applicability and expands the possibilities with <b>ggmap</b>. The one minor drawback to using</text>
<text top="823" left="149" width="595" height="13" font="4">CloudMade Maps is that the user must register with CloudMade to obtain an API key and then pass</text>
<text top="839" left="149" width="595" height="13" font="4">the API key into get_map with the api_key argument. API keys are free of charge and can be obtained</text>
<text top="855" left="149" width="487" height="13" font="4">in a matter of minutes. Two low-light CloudMade map styles are seen in Figure</text>
<text top="855" left="640" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#7">6</a></text>
<text top="855" left="647" width="98" height="13" font="4"><a href="2013-1-kahle-wickham.html#7">. </a>Note that map</text>
<text top="872" left="149" width="307" height="13" font="4">styles are only available to the user that owns them.</text>
<text top="893" left="171" width="573" height="13" font="4">Both Stamen Maps and CloudMade Maps are built using OpenStreetMap data. These data are</text>
<text top="909" left="149" width="597" height="13" font="4">contributed by an open community of online users in much the same way Wikipedia is—both are free,</text>
<text top="926" left="149" width="595" height="13" font="4">both are user-contributed, and both are easily edited. Moreover, OpenStreetMap has data not only on</text>
<text top="942" left="149" width="595" height="13" font="4">roadways and bodies of water but also individual buildings, fountains, stop signs and other apparent</text>
<text top="959" left="149" width="595" height="13" font="4">minutiae. The drawback is that (like Google Maps) not all locations are mapped with the same degree</text>
<text top="975" left="149" width="516" height="13" font="4">of precision, and imperfections may be observed in small-scale out of the way featur<a href="2013-1-kahle-wickham.html#0">es.</a></text>
<text top="972" left="664" width="5" height="10" font="12"><a href="2013-1-kahle-wickham.html#0">2</a></text>
<text top="1017" left="149" width="27" height="15" font="13"><b>The</b></text>
<text top="1017" left="179" width="38" height="13" font="10">ggmap</text>
<text top="1017" left="221" width="58" height="15" font="13"><b>function</b></text>
<text top="1048" left="149" width="595" height="13" font="4">Once get_map has grabbed the map of interest, ggmap is ready to plot it. The result of get_map is a</text>
<text top="1065" left="149" width="495" height="13" font="4">specially classed raster object (a matrix of colors as hexadecimal character strings) –</text>
<text top="1091" left="149" width="261" height="11" font="4">&gt; paris &lt;- get_map(location = &#34;paris&#34;)</text>
<text top="1108" left="149" width="82" height="11" font="4">&gt; str(paris)</text>
<text top="1132" left="165" width="4" height="9" font="14">2</text>
<text top="1134" left="170" width="574" height="12" font="1">As an example, the reader is referred to look at Google Maps satellite images of northwest tributaries to Lake</text>
<text top="1148" left="148" width="312" height="12" font="1">Waco and search for them in the Stamen watercolor tile set.</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="7" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">150</text>
<text top="98" left="149" width="450" height="13" font="10">qmap(baylor, zoom = 14, maptype = 53428, api_key = api_key,</text>
<text top="116" left="187" width="160" height="13" font="10">source = &#34;cloudmade&#34;)</text>
<text top="134" left="149" width="473" height="13" font="10">qmap(&#34;houston&#34;, zoom = 10, maptype = 58916, api_key = api_key,</text>
<text top="152" left="187" width="160" height="13" font="10">source = &#34;cloudmade&#34;)</text>
<text top="510" left="149" width="54" height="13" font="3"><b>Figure 6:</b></text>
<text top="510" left="209" width="535" height="13" font="4">Two out of thousands of user made CloudMade Maps styles. The left is comparable to</text>
<text top="527" left="149" width="44" height="13" font="4">Figures</text>
<text top="527" left="196" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#4">3</a></text>
<text top="527" left="206" width="23" height="13" font="4">and</text>
<text top="527" left="233" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#6">5</a></text>
<text top="527" left="239" width="311" height="13" font="4"><a href="2013-1-kahle-wickham.html#6">, </a>and the right contains the bodies of water in Figure</text>
<text top="527" left="554" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#5">4</a></text>
<text top="527" left="560" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#5">.</a></text>
<text top="577" left="156" width="370" height="11" font="4">chr [1:1280, 1:1280] &#34;#C6DAB6&#34; &#34;#C2D6B3&#34; &#34;#C2D6B3&#34; ...</text>
<text top="593" left="156" width="316" height="11" font="4">- attr(*, &#34;class&#34;)= chr [1:2] &#34;ggmap&#34; &#34;raster&#34;</text>
<text top="610" left="156" width="199" height="11" font="4">- attr(*, &#34;bb&#34;)=’data.frame’:</text>
<text top="610" left="409" width="62" height="11" font="4">1 obs. of</text>
<text top="610" left="485" width="82" height="11" font="4">4 variables:</text>
<text top="626" left="163" width="137" height="11" font="4">..$ ll.lat: num 48.6</text>
<text top="643" left="163" width="137" height="11" font="4">..$ ll.lon: num 1.91</text>
<text top="659" left="163" width="137" height="11" font="4">..$ ur.lat: num 49.1</text>
<text top="675" left="163" width="137" height="11" font="4">..$ ur.lon: num 2.79</text>
<text top="702" left="148" width="596" height="13" font="4">The purpose of ggmap is to take the map from the raster object to the screen, and it fulfills this purpose</text>
<text top="718" left="149" width="595" height="13" font="4">by creating a ggplot object which, when printed, draws the desired map in the graphics device. This is</text>
<text top="735" left="149" width="118" height="13" font="4">illustrated in Figure</text>
<text top="735" left="270" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#8">7</a></text>
<text top="735" left="277" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#8">.</a></text>
<text top="756" left="171" width="575" height="13" font="4">While ggmap requires a ggmap object, it accepts a handful of other arguments as well—extent,</text>
<text top="773" left="149" width="69" height="11" font="4">base_layer</text>
<text top="772" left="217" width="527" height="13" font="4">, maprange, legend, padding, and darken. With none of these additional arguments, ggmap</text>
<text top="788" left="149" width="270" height="13" font="4">effectively returns the following ggplot object</text>
<text top="816" left="149" width="350" height="11" font="4">ggplot(aes(x = lon, y = lat), data = fourCorners) +</text>
<text top="832" left="163" width="261" height="11" font="4">geom_blank() + coord_map(&#34;mercator&#34;) +</text>
<text top="849" left="163" width="329" height="11" font="4">annotation_raster(ggmap, xmin, xmax, ymin, ymax)</text>
<text top="875" left="148" width="596" height="13" font="4">where fourCorners is the data frame resulting from applying expand.grid to the longitude and</text>
<text top="891" left="149" width="595" height="13" font="4">latitude ranges specified in the bb attribute of the ggmap object. Thus, the default base layer of</text>
<text top="908" left="149" width="595" height="13" font="4">the ggplot2 object created by ggmap is ggplot(aes(x = lon,y = lat),data = fourCorners), and the</text>
<text top="924" left="149" width="596" height="13" font="4">default x and y aesthetic scales are calculated based on the longitude and latitude ranges of the map.</text>
<text top="945" left="171" width="573" height="13" font="4">The extent argument dictates how much of the graphics device is covered by the map. It</text>
<text top="962" left="149" width="360" height="13" font="4">accepts three possible strings: &#34;normal&#34; shown in Figure</text>
<text top="962" left="515" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#8">7</a></text>
<text top="962" left="522" width="173" height="13" font="4"><a href="2013-1-kahle-wickham.html#8">, </a>&#34;panel&#34; shown in Figures</text>
<text top="962" left="701" width="14" height="13" font="7"><a href="2013-1-kahle-wickham.html#12">10</a></text>
<text top="962" left="721" width="23" height="13" font="4">and</text>
<text top="978" left="148" width="14" height="13" font="7"><a href="2013-1-kahle-wickham.html#15">12</a></text>
<text top="978" left="162" width="582" height="13" font="4"><a href="2013-1-kahle-wickham.html#15">, </a>and &#34;device&#34; shown in every other figure. &#34;normal&#34; situates the map with the usual axis</text>
<text top="994" left="148" width="598" height="13" font="4">padding provided by <b>ggplot2 </b>and, consequently, one can see the panel behind it. &#34;panel&#34; elimi-</text>
<text top="1011" left="149" width="595" height="13" font="4">nates this, setting the limits of the plot panel to be the longitude and latitude extents of the map with</text>
<text top="1028" left="149" width="268" height="11" font="4">scale_[x,y]_continuous(expand = c(0,0))</text>
<text top="1027" left="416" width="328" height="13" font="4">. &#34;device&#34; takes this to the extreme by eliminating the</text>
<text top="1044" left="149" width="329" height="13" font="4">axes themselves with the new exported theme_nothing.</text>
<text top="1065" left="171" width="69" height="11" font="4">base_layer</text>
<text top="1065" left="244" width="502" height="13" font="4">is a call which substitutes the default base layer to the user’s specification. Thus,</text>
<text top="1081" left="149" width="595" height="13" font="4">in the above code the user can change ggplot(aes(x = lon,y = lat),data = fourCorners) to a</text>
<text top="1098" left="149" width="595" height="13" font="4">different call. This is essential for faceting plots since the referent of <b>ggplot2 </b>functions facet_wrap and</text>
<text top="1115" left="149" width="69" height="11" font="4">facet_grid</text>
<text top="1114" left="221" width="524" height="13" font="4">is the base layer. Since changing the base layer changes the base scales and therefore limits</text>
<text top="1130" left="149" width="595" height="13" font="4">of the plot, it is possible that when the base layer is changed only part of the map is visible. Setting</text>
<text top="1147" left="149" width="595" height="13" font="4">the maprange argument to TRUE (it defaults to FALSE) ensures that the map determines the x and y axis</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="8" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">151</text>
<text top="98" left="149" width="236" height="13" font="10">ggmap(paris, extent = &#34;normal&#34;)</text>
<text top="525" left="149" width="54" height="13" font="3"><b>Figure 7:</b></text>
<text top="525" left="209" width="535" height="13" font="4">Setting extent = &#34;normal&#34; in ggmap illustrates how maps in <b>ggmap </b>are simply <b>ggplot2</b></text>
<text top="542" left="149" width="54" height="13" font="4">graphics.</text>
<text top="591" left="149" width="596" height="13" font="4">limits (longitude and latitude) via the bb attribute of the ggmap object itself, and not the base_layer</text>
<text top="608" left="149" width="61" height="13" font="4">argument.</text>
<text top="629" left="171" width="573" height="13" font="4">The legend-related arguments of ggmap are legend and padding, and they are only applicable</text>
<text top="645" left="148" width="596" height="13" font="4">when extent = &#34;device&#34;. The legend argument determines where a legend should be drawn on the</text>
<text top="662" left="149" width="597" height="13" font="4">map if one should be drawn. Its options are &#34;left&#34;, &#34;right&#34; (default), &#34;bottom&#34;, &#34;top&#34;, &#34;topleft&#34;,</text>
<text top="679" left="149" width="82" height="11" font="4">&#34;bottomleft&#34;</text>
<text top="678" left="231" width="513" height="13" font="4">, &#34;topright&#34;, &#34;bottomright&#34; and &#34;none&#34;. The first four draw the legend according to</text>
<text top="694" left="149" width="46" height="13" font="3"><b>ggplot2</b></text>
<text top="694" left="195" width="549" height="13" font="4">’s normal specifications (without any axes); the next four draw the legend on top of the map</text>
<text top="711" left="149" width="595" height="13" font="4">itself similar to ArcGIS; and the last eliminates the legend altogether. padding governs how far from</text>
<text top="727" left="149" width="234" height="13" font="4">the corner the legend should be drawn.</text>
<text top="748" left="171" width="575" height="13" font="4">The darken argument, a suggestion by Jean-Olivier Irisson, tints the map image. The default,</text>
<text top="765" left="149" width="82" height="11" font="4">c(0,&#34;black&#34;)</text>
<text top="765" left="231" width="513" height="13" font="4">, indicates a fully translucent black layer, i.e. no tint at all. Generally, the first argument</text>
<text top="781" left="149" width="595" height="13" font="4">corresponds to an alpha blending (0 = invisible, 1 = opaque) and the second argument the color of the</text>
<text top="798" left="149" width="595" height="13" font="4">tint. If only a number is supplied to the darken argument ggmap assumes a black tint. The tint itself is</text>
<text top="814" left="149" width="531" height="13" font="4">made by adding a geom_rect layer on top of the map. An example is provided by Figure</text>
<text top="814" left="683" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#2">2</a></text>
<text top="814" left="690" width="54" height="13" font="4"><a href="2013-1-kahle-wickham.html#2">, </a>where a</text>
<text top="830" left="149" width="417" height="13" font="4">black tint was added to the map to enhance the visibility of the points.</text>
<text top="851" left="171" width="573" height="13" font="4">Since ggmap returns a ggplot object, the product of ggmap can itself act as a base layer in the <b>ggplot2</b></text>
<text top="868" left="149" width="595" height="13" font="4">framework. This is an incredibly important realization which allows for the full range of <b>ggplot2</b></text>
<text top="884" left="149" width="595" height="13" font="4">capabilities. We now illustrate many of the ways in which this can be done effectively through a case</text>
<text top="901" left="149" width="313" height="13" font="4">study of violent crime in downtown Houston, Texas.</text>
<text top="945" left="149" width="132" height="17" font="5"><b>ggmap in action</b></text>
<text top="987" left="149" width="32" height="15" font="13"><b>Data</b></text>
<text top="1019" left="149" width="211" height="13" font="4">Crime data were compiled from the</text>
<text top="1019" left="363" width="223" height="13" font="7"><a href="http://www.houstontx.gov/police/cs/stats2.htm">Houston Police Department’s website</a></text>
<text top="1019" left="589" width="155" height="13" font="4">over the period of January</text>
<text top="1035" left="149" width="434" height="13" font="4">2010–August 2010. The data were lightly cleaned and aggregated using</text>
<text top="1035" left="587" width="25" height="13" font="6"><a href="http://CRAN.R-project.org/package=plyr"><b>plyr</b></a></text>
<text top="1035" left="616" width="5" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">(</a></text>
<text top="1035" left="621" width="58" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Wickham</a></text>
<text top="1035" left="678" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="1035" left="685" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2011</a></text>
<text top="1035" left="713" width="31" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">) </a>and</text>
<text top="1052" left="149" width="595" height="13" font="4">geocoded using Google Maps (to the center of the block, e.g., 6150 Main St.); the full data set is</text>
<text top="1068" left="149" width="242" height="13" font="4">available in <b>ggmap </b>as the data set crime.</text>
<text top="1098" left="149" width="82" height="11" font="4">&gt; str(crime)</text>
<text top="1115" left="149" width="89" height="11" font="4">’data.frame’:</text>
<text top="1115" left="293" width="89" height="11" font="4">86314 obs. of</text>
<text top="1115" left="396" width="89" height="11" font="4">17 variables:</text>
<text top="1131" left="156" width="41" height="11" font="4">$ time</text>
<text top="1131" left="224" width="233" height="11" font="4">: POSIXt, format: &#34;2010-01-01 0...</text>
<text top="1147" left="156" width="41" height="11" font="4">$ date</text>
<text top="1147" left="224" width="34" height="11" font="4">: chr</text>
<text top="1147" left="272" width="185" height="11" font="4">&#34;1/1/2010&#34; &#34;1/1/2010&#34; &#34;1...</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="9" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">152</text>
<text top="104" left="156" width="41" height="11" font="4">$ hour</text>
<text top="104" left="224" width="34" height="11" font="4">: int</text>
<text top="104" left="272" width="158" height="11" font="4">0 0 0 0 0 0 0 0 0 0 ...</text>
<text top="120" left="156" width="103" height="11" font="4">$ premise : chr</text>
<text top="120" left="272" width="185" height="11" font="4">&#34;18A&#34; &#34;13R&#34; &#34;20R&#34; &#34;20R&#34; ...</text>
<text top="137" left="156" width="103" height="11" font="4">$ offense : chr</text>
<text top="137" left="272" width="185" height="11" font="4">&#34;murder&#34; &#34;robbery&#34; &#34;aggr...</text>
<text top="153" left="156" width="41" height="11" font="4">$ beat</text>
<text top="153" left="224" width="34" height="11" font="4">: chr</text>
<text top="153" left="272" width="185" height="11" font="4">&#34;15E30&#34; &#34;13D10&#34; &#34;16E20&#34; ...</text>
<text top="169" left="156" width="48" height="11" font="4">$ block</text>
<text top="169" left="224" width="34" height="11" font="4">: chr</text>
<text top="169" left="272" width="185" height="11" font="4">&#34;9600-9699&#34; &#34;4700-4799&#34; ...</text>
<text top="186" left="156" width="55" height="11" font="4">$ street</text>
<text top="186" left="224" width="34" height="11" font="4">: chr</text>
<text top="186" left="272" width="185" height="11" font="4">&#34;marlive&#34; &#34;telephone&#34; &#34;w...</text>
<text top="202" left="156" width="41" height="11" font="4">$ type</text>
<text top="202" left="224" width="34" height="11" font="4">: chr</text>
<text top="202" left="272" width="158" height="11" font="4">&#34;ln&#34; &#34;rd&#34; &#34;ln&#34; &#34;st&#34; ...</text>
<text top="219" left="156" width="55" height="11" font="4">$ suffix</text>
<text top="219" left="224" width="34" height="11" font="4">: chr</text>
<text top="219" left="272" width="130" height="11" font="4">&#34;-&#34; &#34;-&#34; &#34;-&#34; &#34;-&#34; ...</text>
<text top="235" left="156" width="55" height="11" font="4">$ number</text>
<text top="235" left="224" width="34" height="11" font="4">: int</text>
<text top="235" left="272" width="158" height="11" font="4">1 1 1 1 1 1 1 1 1 1 ...</text>
<text top="252" left="156" width="48" height="11" font="4">$ month</text>
<text top="252" left="224" width="233" height="11" font="4">: Factor w/ 12 levels &#34;january&#34;...</text>
<text top="268" left="156" width="34" height="11" font="4">$ day</text>
<text top="268" left="224" width="199" height="11" font="4">: Factor w/ 7 levels &#34;monday&#34;</text>
<text top="268" left="437" width="21" height="11" font="4">...</text>
<text top="285" left="156" width="103" height="11" font="4">$ location: chr</text>
<text top="285" left="272" width="185" height="11" font="4">&#34;apartment parking lot&#34; ...</text>
<text top="301" left="156" width="103" height="11" font="4">$ address : chr</text>
<text top="301" left="272" width="185" height="11" font="4">&#34;9650 marlive ln&#34; &#34;4750 ...</text>
<text top="317" left="156" width="34" height="11" font="4">$ lon</text>
<text top="317" left="224" width="34" height="11" font="4">: num</text>
<text top="317" left="272" width="185" height="11" font="4">-95.4 -95.3 -95.5 -95.4 ...</text>
<text top="334" left="156" width="34" height="11" font="4">$ lat</text>
<text top="334" left="224" width="34" height="11" font="4">: num</text>
<text top="334" left="272" width="185" height="11" font="4">29.7 29.7 29.6 29.8 29.7...</text>
<text top="363" left="171" width="573" height="13" font="4">Since we are only interested in violent crimes which take place downtown, we restrict the data</text>
<text top="380" left="149" width="595" height="13" font="4">set to those qualifiers. To determine a bounding box, we first use gglocator, a <b>ggplot2 </b>analogue</text>
<text top="396" left="149" width="595" height="13" font="4">of base’s locator function exported from <b>ggmap</b>. gglocator works not only for <b>ggmap </b>plots, but</text>
<text top="413" left="149" width="46" height="13" font="3"><b>ggplot2</b></text>
<text top="412" left="199" width="117" height="13" font="4">graphics in general.</text>
<text top="443" left="149" width="247" height="11" font="4">&gt; # find a reasonable spatial extent</text>
<text top="459" left="149" width="192" height="11" font="4">&gt; qmap(’houston’, zoom = 13)</text>
<text top="476" left="149" width="96" height="11" font="4">&gt; gglocator(2)</text>
<text top="492" left="149" width="7" height="11" font="4">&gt;</text>
<text top="492" left="217" width="21" height="11" font="4">lon</text>
<text top="492" left="279" width="21" height="11" font="4">lat</text>
<text top="509" left="149" width="151" height="11" font="4">&gt; 1 -95.39681 29.78400</text>
<text top="525" left="149" width="151" height="11" font="4">&gt; 2 -95.34188 29.73631</text>
<text top="542" left="149" width="7" height="11" font="4">&gt;</text>
<text top="558" left="149" width="158" height="11" font="4">&gt; # only violent crimes</text>
<text top="574" left="149" width="226" height="11" font="4">&gt; violent_crimes &lt;- subset(crime,</text>
<text top="591" left="149" width="7" height="11" font="4">+</text>
<text top="591" left="176" width="473" height="11" font="4">offense != &#34;auto theft&#34; &amp; offense != &#34;theft&#34; &amp; offense != &#34;burglary&#34;)</text>
<text top="607" left="149" width="7" height="11" font="4">&gt;</text>
<text top="624" left="149" width="165" height="11" font="4">&gt; # order violent crimes</text>
<text top="640" left="149" width="398" height="11" font="4">&gt; violent_crimes$offense &lt;- factor(violent_crimes$offense,</text>
<text top="657" left="149" width="7" height="11" font="4">+</text>
<text top="657" left="176" width="425" height="11" font="4">levels = c(&#34;robbery&#34;, &#34;aggravated assault&#34;, &#34;rape&#34;, &#34;murder&#34;))</text>
<text top="673" left="149" width="7" height="11" font="4">&gt;</text>
<text top="690" left="149" width="165" height="11" font="4">&gt; # restrict to downtown</text>
<text top="706" left="149" width="288" height="11" font="4">&gt; violent_crimes &lt;- subset(violent_crimes,</text>
<text top="722" left="149" width="7" height="11" font="4">+</text>
<text top="722" left="176" width="254" height="11" font="4">-95.39681 &lt;= lon &amp; lon &lt;= -95.34188 &amp;</text>
<text top="739" left="149" width="7" height="11" font="4">+</text>
<text top="739" left="183" width="165" height="11" font="4">29.73631 &lt;= lat &amp; lat &lt;=</text>
<text top="739" left="361" width="62" height="11" font="4">29.78400)</text>
<text top="768" left="171" width="575" height="13" font="4">The analysis performed only concerns data on the violent crimes of aggravated assault, robbery,</text>
<text top="785" left="149" width="595" height="13" font="4">rape and murder. Note that while some effort was made to ensure the quality of the data, the data</text>
<text top="801" left="148" width="404" height="13" font="4">were only leisurely cleaned and the data set may still contain errors.</text>
<text top="843" left="149" width="60" height="15" font="13"><b>Analysis</b></text>
<text top="875" left="148" width="596" height="13" font="4">The first step we might want to take is to look at where the individual crimes took place. Modulo some</text>
<text top="891" left="149" width="595" height="13" font="4">simple <b>ggplot2 </b>styling changes (primarily in the fonts and key-styles of the legends via <b>ggplot2</b>’s</text>
<text top="908" left="149" width="34" height="11" font="4">guide</text>
<text top="908" left="186" width="100" height="13" font="4">function), Figure</text>
<text top="908" left="289" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#10">8</a></text>
<text top="908" left="299" width="423" height="13" font="4">contains the code to produce the spatial bubble chart shown on the left.</text>
<text top="929" left="171" width="573" height="13" font="4">One of the problems with the bubble chart is overplotting and point size—we can’t really get a feel</text>
<text top="945" left="149" width="595" height="13" font="4">for what crimes are taking place and where. One way around this is to bin the points and drop the</text>
<text top="962" left="149" width="367" height="13" font="4">bins which don’t have any samples in them. The result (Figure</text>
<text top="962" left="519" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#10">8</a></text>
<text top="962" left="529" width="215" height="13" font="4">right) shows us where the crimes are</text>
<text top="978" left="149" width="319" height="13" font="4">happening at the expense of knowing their frequency.</text>
<text top="999" left="171" width="573" height="13" font="4">The binned plot is the first time we really begin to see the power of having the maps in the <b>ggplot2</b></text>
<text top="1015" left="149" width="595" height="13" font="4">framework. While it is actually not a very good plot, it illustrates the practical advantage of the</text>
<text top="1032" left="149" width="46" height="13" font="3"><b>ggplot2</b></text>
<text top="1032" left="199" width="545" height="13" font="4">framework with the contextual information of the map—the process of splitting the data</text>
<text top="1048" left="149" width="595" height="13" font="4">frame violent_crimes into chunks based on the offense variable, binning the points of each, and</text>
<text top="1065" left="149" width="538" height="13" font="4">aggregating back into one data set to plot is all done entirely behind the scenes by <b>ggplot2</b>.</text>
<text top="1086" left="171" width="573" height="13" font="4">What about violent crimes in general? If we neglect the type of offense, we can get a good idea of</text>
<text top="1102" left="149" width="595" height="13" font="4">the spatial distribution of violent crimes by using a contour plot. Since the map image itself is based</text>
<text top="1119" left="149" width="595" height="13" font="4">on <b>ggplot2</b>’s annotation_raster, which doesn’t have a fill aesthetic, we can access the fill aesthetic to</text>
<text top="1135" left="149" width="286" height="13" font="4">make a filled contour plot. This is seen in Figure</text>
<text top="1135" left="438" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#11">9</a></text>
<text top="1135" left="449" width="32" height="13" font="4">(left).</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="10" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">153</text>
<text top="333" left="149" width="175" height="13" font="10">theme_set(theme_bw(16))</text>
<text top="351" left="149" width="564" height="13" font="10">HoustonMap &lt;- qmap(&#34;houston&#34;, zoom = 14, color = &#34;bw&#34;, legend = &#34;topleft&#34;)</text>
<text top="387" left="149" width="91" height="13" font="10">HoustonMap +</text>
<text top="405" left="172" width="511" height="13" font="10">geom_point(aes(x = lon, y = lat, colour = offense, size = offense),</text>
<text top="423" left="256" width="168" height="13" font="10">data = violent_crimes)</text>
<text top="459" left="149" width="91" height="13" font="10">HoustonMap +</text>
<text top="476" left="164" width="84" height="13" font="10">stat_bin2d(</text>
<text top="494" left="179" width="427" height="13" font="10">aes(x = lon, y = lat, colour = offense, fill = offense),</text>
<text top="512" left="179" width="259" height="13" font="10">size = .5, bins = 30, alpha = 1/2,</text>
<text top="530" left="179" width="160" height="13" font="10">data = violent_crimes</text>
<text top="548" left="164" width="8" height="13" font="10">)</text>
<text top="907" left="168" width="53" height="13" font="3"><b>Figure 8:</b></text>
<text top="907" left="225" width="500" height="13" font="4">Violent crime bubble chart of downtown Houston (left) and the same binned (right).</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="11" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">154</text>
<text top="270" left="149" width="305" height="13" font="10">houston &lt;- get_map(&#34;houston&#34;, zoom = 14)</text>
<text top="288" left="149" width="526" height="13" font="10">HoustonMap &lt;- ggmap(&#34;houston&#34;, extent = &#34;device&#34;, legend = &#34;topleft&#34;)</text>
<text top="324" left="149" width="91" height="13" font="10">HoustonMap +</text>
<text top="342" left="164" width="114" height="13" font="10">stat_density2d(</text>
<text top="360" left="179" width="297" height="13" font="10">aes(x = lon, y = lat, fill = ..level..,</text>
<text top="360" left="492" width="145" height="13" font="10">alpha = ..level..),</text>
<text top="378" left="179" width="320" height="13" font="10">size = 2, bins = 4, data = violent_crimes,</text>
<text top="396" left="179" width="122" height="13" font="10">geom = &#34;polygon&#34;</text>
<text top="414" left="164" width="8" height="13" font="10">)</text>
<text top="450" left="149" width="198" height="13" font="10">overlay &lt;- stat_density2d(</text>
<text top="468" left="164" width="450" height="13" font="10">aes(x = lon, y = lat, fill = ..level.., alpha = ..level..),</text>
<text top="485" left="164" width="206" height="13" font="10">bins = 4, geom = &#34;polygon&#34;,</text>
<text top="503" left="164" width="160" height="13" font="10">data = violent_crimes</text>
<text top="521" left="149" width="8" height="13" font="10">)</text>
<text top="557" left="149" width="221" height="13" font="10">HoustonMap + overlay + inset(</text>
<text top="575" left="179" width="412" height="13" font="10">grob = ggplotGrob(ggplot() + overlay + theme_inset()),</text>
<text top="593" left="179" width="442" height="13" font="10">xmin = -95.35836, xmax = Inf, ymin = -Inf, ymax = 29.75062</text>
<text top="611" left="164" width="8" height="13" font="10">)</text>
<text top="970" left="190" width="53" height="13" font="3"><b>Figure 9:</b></text>
<text top="970" left="247" width="455" height="13" font="4">Filled contour plot of violent crimes (left), and the same with an inset (right).</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="12" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">155</text>
<text top="103" left="171" width="575" height="13" font="4">These kinds of overlays can be incredibly effective; however, their ability to communicate informa-</text>
<text top="120" left="149" width="598" height="13" font="4">tion can be hindered by the fact that the map overlay can be visually confused with the map itself.</text>
<text top="136" left="148" width="596" height="13" font="4">This is particularly common when using colored maps. To get around this problem the inset function</text>
<text top="152" left="149" width="596" height="13" font="4">can be used to insert map insets containing the overlay on a white background with major and minor</text>
<text top="169" left="149" width="595" height="13" font="4">axes lines for visual guides made possible by the exported function theme_inset; this is seen in Figure</text>
<text top="185" left="149" width="7" height="13" font="7"><a href="2013-1-kahle-wickham.html#11">9</a></text>
<text top="185" left="159" width="41" height="13" font="4">(right).</text>
<text top="206" left="171" width="573" height="13" font="4">The image indicates that there are three main hotspots of activity. Each of these three corresponds</text>
<text top="223" left="149" width="597" height="13" font="4">to locations commonly held by Houstonians to be particularly dangerous locations. From east to west,</text>
<text top="239" left="149" width="595" height="13" font="4">the hotspots are caused by (1) a county jail which releases its inmates twice daily, who tend to loiter in</text>
<text top="256" left="149" width="597" height="13" font="4">the area indicated, (2) a commercial bus station in an area of substantial homelessness and destitution,</text>
<text top="272" left="149" width="450" height="13" font="4">and (3) a prostitution hotspot in a very diverse and pedestrian part of town.</text>
<text top="293" left="171" width="573" height="13" font="4">In addition to single plots, the base_layer argument to ggmap or qmap allows for faceted plots (see</text>
<text top="309" left="149" width="38" height="13" font="4">Figure</text>
<text top="309" left="190" width="13" height="13" font="7"><a href="2013-1-kahle-wickham.html#12">10</a></text>
<text top="309" left="203" width="543" height="13" font="4"><a href="2013-1-kahle-wickham.html#12">). </a>This is particularly useful for spatiotemporal data with discrete temporal components (day,</text>
<text top="326" left="149" width="152" height="13" font="4">month, season, year, etc.).</text>
<text top="347" left="171" width="573" height="13" font="4">This last plot displays one of the known issues with contour plots in <b>ggplot2</b>—a “clipping” or</text>
<text top="363" left="147" width="597" height="13" font="4">“tearing” of the contours. Aside from that fact (which will likely be fixed in subsequent <b>ggplot2</b></text>
<text top="380" left="148" width="596" height="13" font="4">versions), we can see that in fact most violent crimes happen on Monday, with a distant second being</text>
<text top="396" left="149" width="595" height="13" font="4">Friday. Friday’s pattern is easily recognizable—a small elevated dot in the downtown bar district and</text>
<text top="412" left="149" width="598" height="13" font="4">an expanded region to the southwest in the district known as midtown, which has an active nightlife.</text>
<text top="429" left="149" width="271" height="13" font="4">Monday’s pattern is not as easily explainable.</text>
<text top="460" left="149" width="495" height="13" font="10">houston &lt;- get_map(location = &#34;houston&#34;, zoom = 14, color = &#34;bw&#34;,</text>
<text top="478" left="294" width="114" height="13" font="10">source = &#34;osm&#34;)</text>
<text top="514" left="149" width="541" height="13" font="10">HoustonMap &lt;- ggmap(houston, base_layer = ggplot(aes(x = lon, y = lat),</text>
<text top="532" left="301" width="175" height="13" font="10">data = violent_crimes))</text>
<text top="568" left="149" width="91" height="13" font="10">HoustonMap +</text>
<text top="586" left="164" width="564" height="13" font="10">stat_density2d(aes(x = lon, y = lat, fill = ..level.., alpha = ..level..),</text>
<text top="604" left="179" width="206" height="13" font="10">bins = 5, geom = &#34;polygon&#34;,</text>
<text top="622" left="179" width="183" height="13" font="10">data = violent_crimes) +</text>
<text top="640" left="164" width="381" height="13" font="10">scale_fill_gradient(low = &#34;black&#34;, high = &#34;red&#34;) +</text>
<text top="658" left="164" width="130" height="13" font="10">facet_wrap(~ day)</text>
<text top="1016" left="313" width="60" height="13" font="3"><b>Figure 10:</b></text>
<text top="1015" left="377" width="202" height="13" font="4">Faceted filled contour plot by day.</text>
<text top="1075" left="149" width="205" height="17" font="5"><b>ggmap’s utility functions</b></text>
<text top="1114" left="149" width="42" height="13" font="3"><b>ggmap</b></text>
<text top="1114" left="194" width="441" height="13" font="4">has several utility functions which aid in spatial exploratory data analysis.</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="13" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">156</text>
<text top="102" left="149" width="27" height="15" font="13"><b>The</b></text>
<text top="103" left="179" width="53" height="13" font="10">geocode</text>
<text top="102" left="236" width="58" height="15" font="13"><b>function</b></text>
<text top="134" left="148" width="598" height="13" font="4">The ability to move from an address to a longitude/latitude coordinate is virtually a must for visu-</text>
<text top="150" left="149" width="595" height="13" font="4">alizing spatial data. Unfortunately however, the process is almost always done outside R by using</text>
<text top="167" left="149" width="595" height="13" font="4">a proper geographic information system (GIS), saving the results, and importing them into R. The</text>
<text top="184" left="149" width="48" height="11" font="4">geocode</text>
<text top="183" left="200" width="304" height="13" font="4">function simplifies this process to a single line in R.</text>
<text top="205" left="171" width="48" height="11" font="4">geocode</text>
<text top="204" left="224" width="520" height="13" font="4">is a vectorized function which accepts character strings and returns a data frame of</text>
<text top="220" left="149" width="595" height="13" font="4">geographic information. In the default case of output = &#34;simple&#34;, only longitudes and latitudes are</text>
<text top="237" left="149" width="595" height="13" font="4">returned. These are actually Mercator projections of the ubiquitous unprojected 1984 world geodetic</text>
<text top="253" left="149" width="595" height="13" font="4">system (WGS84), a spheroidal earth model used by Google Maps. When output is set to &#34;more&#34;, a</text>
<text top="270" left="149" width="597" height="13" font="4">larger data frame is returned which provides much more Google Geocoding information on the query:</text>
<text top="300" left="149" width="322" height="11" font="4">&gt; geocode(&#34;baylor university&#34;, output = &#34;more&#34;)</text>
<text top="317" left="204" width="21" height="11" font="4">lon</text>
<text top="317" left="265" width="21" height="11" font="4">lat</text>
<text top="317" left="334" width="27" height="11" font="4">type</text>
<text top="317" left="396" width="48" height="11" font="4">loctype</text>
<text top="317" left="499" width="48" height="11" font="4">address</text>
<text top="317" left="574" width="34" height="11" font="4">north</text>
<text top="317" left="636" width="34" height="11" font="4">south</text>
<text top="317" left="704" width="27" height="11" font="4">east</text>
<text top="333" left="149" width="583" height="11" font="4">1 -97.11441 31.54872 university approximate [long address] 31.55823 31.53921 -97.0984</text>
<text top="349" left="197" width="110" height="11" font="4">west postal_code</text>
<text top="349" left="355" width="48" height="11" font="4">country</text>
<text top="349" left="423" width="185" height="11" font="4">administrative_area_level_2</text>
<text top="366" left="149" width="75" height="11" font="4">1 -97.13042</text>
<text top="366" left="272" width="130" height="11" font="4">76706 united states</text>
<text top="366" left="554" width="55" height="11" font="4">mclennan</text>
<text top="382" left="163" width="247" height="11" font="4">administrative_area_level_1 locality</text>
<text top="382" left="430" width="41" height="11" font="4">street</text>
<text top="382" left="485" width="178" height="11" font="4">streetNo point_of_interest</text>
<text top="399" left="149" width="7" height="11" font="4">1</text>
<text top="399" left="313" width="34" height="11" font="4">texas</text>
<text top="399" left="382" width="89" height="11" font="4">waco s 5th st</text>
<text top="399" left="512" width="27" height="11" font="4">1311</text>
<text top="399" left="636" width="27" height="11" font="4">&lt;NA&gt;</text>
<text top="428" left="149" width="595" height="13" font="4">In particular, administrative bodies at various levels are reported. Going further, setting output =</text>
<text top="445" left="149" width="34" height="11" font="4">&#34;all&#34;</text>
<text top="445" left="186" width="558" height="13" font="4">returns the entire JavaScript Object Notation (JSON) object given by the Google Geocoding API</text>
<text top="461" left="148" width="59" height="13" font="4">parsed by</text>
<text top="461" left="211" width="31" height="13" font="6"><a href="http://CRAN.R-project.org/package=rjson"><b>rjson</b></a></text>
<text top="461" left="245" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">(</a></text>
<text top="461" left="250" width="76" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Couture-Beil</a></text>
<text top="461" left="326" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="461" left="332" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2013</a></text>
<text top="461" left="359" width="8" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">).</a></text>
<text top="482" left="171" width="573" height="13" font="4">The Geocoding API has a number of request limitations in place to prevent abuse. An unspecified</text>
<text top="498" left="149" width="595" height="13" font="4">short-term rate limit is in place (see mapdist below) as well as a 24-hour limit of 2,500 requests. These</text>
<text top="515" left="149" width="595" height="13" font="4">are monitored to some extent by the hidden global variable .GoogleGeocodeQueryCount and exported</text>
<text top="531" left="149" width="596" height="13" font="4">function geocodeQueryCheck. geocode uses these to monitor its own progress and will either (1) slow</text>
<text top="548" left="149" width="595" height="13" font="4">its rate depending on usage or (2) throw an error if the query limit is exceeded. Note that revgeocode</text>
<text top="564" left="149" width="595" height="13" font="4">shares the same request pool and is monitored by the same variable and function. To learn more about</text>
<text top="581" left="149" width="595" height="13" font="4">the Google Geocoding, Distance Matrix, and Directions API usage regulations, see the websites listed</text>
<text top="597" left="149" width="116" height="13" font="4">in the bibliography.</text>
<text top="639" left="149" width="27" height="15" font="13"><b>The</b></text>
<text top="640" left="179" width="76" height="13" font="10">revgeocode</text>
<text top="639" left="259" width="58" height="15" font="13"><b>function</b></text>
<text top="671" left="149" width="595" height="13" font="4">In some instances it is useful to convert longitude/latitude coordinates into a physical address. This is</text>
<text top="687" left="149" width="595" height="13" font="4">made possible (to the extent to which it is possible) with the revgeocode function which also relies on</text>
<text top="704" left="149" width="163" height="13" font="4">the Google Geocoding API.</text>
<text top="731" left="149" width="247" height="11" font="4">&gt; gc &lt;- geocode(&#34;baylor university&#34;)</text>
<text top="748" left="149" width="165" height="11" font="4">&gt; (gc &lt;- as.numeric(gc))</text>
<text top="764" left="149" width="89" height="11" font="4">[1] -97.11441</text>
<text top="764" left="252" width="55" height="11" font="4">31.54872</text>
<text top="781" left="149" width="110" height="11" font="4">&gt; revgeocode(gc)</text>
<text top="797" left="149" width="370" height="11" font="4">[1] &#34;S 1st St, Baylor University, Waco, TX 76706, USA&#34;</text>
<text top="823" left="149" width="313" height="13" font="4">Like geocode, more output can be provided as well –</text>
<text top="851" left="149" width="226" height="11" font="4">&gt; revgeocode(gc, output = &#34;more&#34;)</text>
<text top="867" left="204" width="48" height="11" font="4">address</text>
<text top="867" left="286" width="34" height="11" font="4">route</text>
<text top="867" left="355" width="89" height="11" font="4">establishment</text>
<text top="867" left="457" width="144" height="11" font="4">neighborhood locality</text>
<text top="884" left="149" width="295" height="11" font="4">1 [long address] S 1st St Baylor University</text>
<text top="884" left="499" width="41" height="11" font="4">Baylor</text>
<text top="884" left="574" width="27" height="11" font="4">Waco</text>
<text top="900" left="163" width="377" height="11" font="4">administrative_area_level_2 administrative_area_level_1</text>
<text top="900" left="588" width="130" height="11" font="4">country postal_code</text>
<text top="917" left="149" width="7" height="11" font="4">1</text>
<text top="917" left="293" width="55" height="11" font="4">McLennan</text>
<text top="917" left="506" width="130" height="11" font="4">Texas United States</text>
<text top="917" left="684" width="34" height="11" font="4">76706</text>
<text top="943" left="148" width="596" height="13" font="4">Thus, in addition to the physical where of a reverse geocode (i.e., the address), revgeocode can report</text>
<text top="959" left="149" width="595" height="13" font="4">the what at various levels of granularity. Finally, an output = &#34;all&#34; option is available which returns</text>
<text top="976" left="149" width="253" height="13" font="4">the entire JSON object reported by Google.</text>
<text top="1018" left="149" width="27" height="15" font="13"><b>The</b></text>
<text top="1019" left="179" width="53" height="13" font="10">mapdist</text>
<text top="1018" left="236" width="58" height="15" font="13"><b>function</b></text>
<text top="1050" left="148" width="596" height="13" font="4">The ability to compute colloquial distances in a spatial setting is another invaluable commodity which</text>
<text top="1066" left="149" width="595" height="13" font="4">typically sends analysts to a GIS. Using the Google Distance Matrix API, <b>ggmap </b>is able to provide</text>
<text top="1082" left="149" width="597" height="13" font="4">distances for Google-determined routes for driving, bicycling, or walking. In addition to the distances,</text>
<text top="1099" left="149" width="595" height="13" font="4">Google reports estimated travel durations as well. The full output is placed in an easy-to-use data</text>
<text top="1115" left="149" width="120" height="13" font="4">frame. For example,</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="14" position="absolute" top="0" left="0" height="1262" width="892">
	<fontspec id="17" size="4" family="Helvetica" color="#ffffff"/>
	<fontspec id="18" size="7" family="Helvetica" color="#000000"/>
	<fontspec id="19" size="8" family="Helvetica" color="#000000"/>
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">157</text>
<text top="104" left="149" width="295" height="11" font="4">&gt; from &lt;- c(&#34;houston&#34;, &#34;houston&#34;, &#34;dallas&#34;)</text>
<text top="120" left="149" width="343" height="11" font="4">&gt; to &lt;- c(&#34;waco, texas&#34;, &#34;san antonio&#34;, &#34;houston&#34;)</text>
<text top="137" left="149" width="130" height="11" font="4">&gt; mapdist(from, to)</text>
<text top="153" left="183" width="27" height="11" font="4">from</text>
<text top="153" left="279" width="14" height="11" font="4">to</text>
<text top="153" left="334" width="7" height="11" font="4">m</text>
<text top="153" left="382" width="14" height="11" font="4">km</text>
<text top="153" left="423" width="144" height="11" font="4">miles seconds minutes</text>
<text top="153" left="595" width="34" height="11" font="4">hours</text>
<text top="169" left="149" width="309" height="11" font="4">1 houston waco, texas 298004 298.004 185.1797</text>
<text top="169" left="478" width="34" height="11" font="4">11907</text>
<text top="169" left="526" width="103" height="11" font="4">198.45 3.307500</text>
<text top="186" left="149" width="309" height="11" font="4">2 houston san antonio 320764 320.764 199.3227</text>
<text top="186" left="478" width="34" height="11" font="4">11997</text>
<text top="186" left="526" width="103" height="11" font="4">199.95 3.332500</text>
<text top="202" left="149" width="7" height="11" font="4">3</text>
<text top="202" left="169" width="41" height="11" font="4">dallas</text>
<text top="202" left="245" width="213" height="11" font="4">houston 387389 387.389 240.7235</text>
<text top="202" left="478" width="34" height="11" font="4">14592</text>
<text top="202" left="526" width="103" height="11" font="4">243.20 4.053333</text>
<text top="228" left="148" width="596" height="13" font="4">The default mode of transportation is driving; however, the other modes are also available. The input</text>
<text top="244" left="149" width="595" height="13" font="4">forms of from and to can be either physical addresses (ideal), lazy (&#34;the white house&#34;), or geographic</text>
<text top="261" left="149" width="595" height="13" font="4">coordinates (which are reverse geocoded). While the output defaults to the data frame format seen</text>
<text top="277" left="149" width="440" height="13" font="4">above, setting output = &#34;all&#34; provides the full JSON object from Google.</text>
<text top="298" left="171" width="573" height="13" font="4">The Distance Matrix API limits users to 100 requests per query, 100 requests per 10 seconds, and</text>
<text top="315" left="149" width="595" height="13" font="4">2500 requests per 24 hours. To the extent to which these can be easily monitored, the exported function</text>
<text top="332" left="149" width="96" height="11" font="4">distQueryCheck</text>
<text top="331" left="248" width="496" height="13" font="4">helps the user keep track of their remaining balance of queries. It relies on the hidden</text>
<text top="347" left="149" width="246" height="13" font="4">global variable .GoogleDistQueryCount –</text>
<text top="374" left="149" width="123" height="11" font="4">&gt; distQueryCheck()</text>
<text top="391" left="149" width="219" height="11" font="4">2495 distance queries remaining.</text>
<text top="407" left="149" width="158" height="11" font="4">&gt; .GoogleDistQueryCount</text>
<text top="424" left="265" width="27" height="11" font="4">time</text>
<text top="424" left="348" width="82" height="11" font="4">url elements</text>
<text top="440" left="149" width="219" height="11" font="4">1 2012-03-16 00:12:11 [url used]</text>
<text top="440" left="423" width="7" height="11" font="4">1</text>
<text top="456" left="149" width="219" height="11" font="4">2 2012-03-16 00:16:10 [url used]</text>
<text top="456" left="423" width="7" height="11" font="4">2</text>
<text top="482" left="149" width="595" height="13" font="4">If the user exceeds the limitations, mapdist either (1) pauses until the short-term request limit has</text>
<text top="498" left="149" width="595" height="13" font="4">lapsed or (2) errors if no queries are remaining. Thus, it is almost identical to the mechanism in</text>
<text top="515" left="148" width="596" height="13" font="4">place for geocoding. If the user believes this to be incorrect, an override is available with the mapdist</text>
<text top="531" left="149" width="225" height="13" font="4">specification override_limit = TRUE.</text>
<text top="552" left="171" width="573" height="13" font="4">The data frame output of mapdist is very convenient for use with <b>ggplot2</b>. An example is provided</text>
<text top="569" left="149" width="59" height="13" font="4">by Figure</text>
<text top="569" left="213" width="14" height="13" font="7"><a href="2013-1-kahle-wickham.html#14">11</a></text>
<text top="569" left="227" width="517" height="13" font="4"><a href="2013-1-kahle-wickham.html#14">, </a>where travel times from one location (&#34;My Office&#34;) to several nearby locations are</text>
<text top="585" left="148" width="596" height="13" font="4">(1) determined using mapdist, (2) binned into categories using cut, and then (3) plotted using a</text>
<text top="602" left="149" width="598" height="13" font="4">combination of qmap, geom_text, and geom_rect with the fill aesthetic set to the category of travel time.</text>
<text top="618" left="148" width="419" height="13" font="4">The full code is in the examples section of the documentation of ggmap.</text>
<text top="841" left="383" width="39" height="6" font="17">Administration</text>
<text top="801" left="464" width="48" height="6" font="17">Baseball Stadium</text>
<text top="824" left="476" width="47" height="6" font="17">Basketball Arena</text>
<text top="866" left="334" width="41" height="6" font="17">Salvation Army</text>
<text top="884" left="369" width="37" height="6" font="17">HEB Grocery</text>
<text top="765" left="305" width="47" height="6" font="17">Cafe Cappuccino</text>
<text top="757" left="338" width="43" height="6" font="17">Ninfa's Mexican</text>
<text top="772" left="325" width="53" height="6" font="17">Dr Pepper Museum</text>
<text top="734" left="411" width="40" height="6" font="17">Buzzard Billy's</text>
<text top="795" left="405" width="49" height="6" font="17">Mayborn Museum</text>
<text top="975" left="350" width="33" height="6" font="17">Flea Market</text>
<text top="818" left="394" width="41" height="9" font="18">My Office</text>
<text top="941" left="452" width="41" height="10" font="19"><b>Minutes</b></text>
<text top="956" left="452" width="28" height="10" font="19"><b>Away</b></text>
<text top="970" left="452" width="39" height="10" font="19"><b>by Bike</b></text>
<text top="962" left="496" width="103" height="9" font="18">0−3 3−5 5−7 7−10 10+</text>
<text top="1027" left="296" width="60" height="13" font="3"><b>Figure 11:</b></text>
<text top="1027" left="360" width="237" height="13" font="4">Distances by time provided by mapdist.</text>
<text top="1083" left="149" width="27" height="15" font="13"><b>The</b></text>
<text top="1083" left="179" width="38" height="13" font="10">route</text>
<text top="1083" left="221" width="58" height="15" font="13"><b>function</b></text>
<text top="1114" left="148" width="596" height="13" font="4">The route function provides the map distances for the sequence of “legs” which constitute a route</text>
<text top="1130" left="149" width="595" height="13" font="4">between two locations. Each leg has a beginning and ending longitude/latitude coordinate along with</text>
<text top="1147" left="149" width="595" height="13" font="4">a distance and duration in the same units as reported by mapdist. The collection of legs in sequence</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="15" position="absolute" top="0" left="0" height="1262" width="892">
	<fontspec id="20" size="10" family="Times" color="#7282aa"/>
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">158</text>
<text top="103" left="149" width="595" height="13" font="4">constitutes a single route (path) most easily plotted with geom_leg, a new exported <b>ggplot2 </b>geom</text>
<text top="120" left="148" width="300" height="13" font="4">which is simply geom_segment with rounded <a href="2013-1-kahle-wickham.html#0">ends.</a></text>
<text top="117" left="448" width="5" height="10" font="12"><a href="2013-1-kahle-wickham.html#0">3</a></text>
<text top="141" left="171" width="439" height="13" font="4">A nice illustration of plotting routes with geom_leg can be seen in Figure</text>
<text top="141" left="613" width="14" height="13" font="7"><a href="2013-1-kahle-wickham.html#15">12</a></text>
<text top="141" left="631" width="113" height="13" font="4">where three routes</text>
<text top="157" left="149" width="595" height="13" font="4">are plotted between the same two locations. These can be obtained using the alternatives = TRUE</text>
<text top="173" left="149" width="597" height="13" font="4">specification in route. alternatives requests more than one route from the origin to the destination;</text>
<text top="190" left="149" width="596" height="13" font="4">the returned value is again a data frame with an additional variable which serves as a route identifier</text>
<text top="206" left="148" width="81" height="13" font="4">(A, B, C, etc.).</text>
<text top="237" left="149" width="130" height="13" font="10">legs_df &lt;- route(</text>
<text top="255" left="164" width="320" height="13" font="10">’marrs mclean science, baylor university’,</text>
<text top="272" left="164" width="297" height="13" font="10">’220 south 3rd street, waco, tx 76701’,</text>
<text top="290" left="164" width="145" height="13" font="10">alternatives = TRUE</text>
<text top="308" left="149" width="8" height="13" font="10">)</text>
<text top="344" left="149" width="488" height="13" font="10">qmap(’424 clay avenue, waco, tx’, zoom = 15, maptype = ’hybrid’,</text>
<text top="362" left="179" width="541" height="13" font="10">base_layer = ggplot(aes(x = startLon, y = startLat), data = legs_df)) +</text>
<text top="380" left="164" width="69" height="13" font="10">geom_leg(</text>
<text top="398" left="179" width="465" height="13" font="10">aes(x = startLon, y = startLat, xend = endLon, yend = endLat,</text>
<text top="416" left="210" width="122" height="13" font="10">colour = route),</text>
<text top="434" left="179" width="282" height="13" font="10">alpha = 3/4, size = 2, data = legs_df</text>
<text top="452" left="164" width="23" height="13" font="10">) +</text>
<text top="470" left="164" width="434" height="13" font="10">labs(x = ’Longitude’, y = ’Latitude’, colour = ’Route’) +</text>
<text top="488" left="164" width="473" height="13" font="10">facet_wrap(~ route, ncol = 3) + theme(legend.position = ’top’)</text>
<text top="801" left="252" width="60" height="13" font="3"><b>Figure 12:</b></text>
<text top="801" left="316" width="324" height="13" font="4">Three routes returned by route plotted with geom_leg.</text>
<text top="838" left="171" width="573" height="13" font="4">Like map distances, there are restrictions on the limit of routes which can be requested in a given</text>
<text top="854" left="148" width="596" height="13" font="4">period of time as well. The number of queries left is monitored by the .GoogleRouteQueryCount</text>
<text top="871" left="148" width="264" height="13" font="4">variable with the routeQueryCheck function.</text>
<text top="915" left="149" width="156" height="17" font="5"><b>Plotting shape files</b></text>
<text top="954" left="148" width="596" height="13" font="4">As a final example which is perhaps too common to ignore, plotting shape files with <b>ggmap </b>is a</text>
<text top="971" left="149" width="595" height="13" font="4">breeze and can be done in several ways. The easiest way is to convert the shape file to a data frame</text>
<text top="987" left="148" width="596" height="13" font="4">with fortify (<b>ggplot2</b>) and then add a point/path/polygon layer to the map, depending on what</text>
<text top="1004" left="149" width="598" height="13" font="4">the contents of the shape file are (note that fortify does not yet have methods for all shape files).</text>
<text top="1020" left="148" width="489" height="13" font="4">Additional layers can be added by simply layering on more geom layers. Figure</text>
<text top="1020" left="642" width="14" height="13" font="7"><a href="2013-1-kahle-wickham.html#16">13</a></text>
<text top="1020" left="660" width="84" height="13" font="4">shows a basic</text>
<text top="1036" left="149" width="479" height="13" font="4">example of plotting the U.S. Census 2000 census tracts along with complete code <a href="2013-1-kahle-wickham.html#17">(</a></text>
<text top="1036" left="627" width="118" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">U.S. Census Bureau,</a></text>
<text top="1053" left="149" width="390" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Geography Division, Cartographic Products Management Branch</a></text>
<text top="1053" left="538" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="1053" left="545" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2001</a></text>
<text top="1053" left="572" width="8" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">).</a></text>
<text top="1080" left="165" width="4" height="9" font="14">3</text>
<text top="1082" left="170" width="346" height="12" font="1">This was inspired by the beautiful work of J. Cheshire available at</text>
<text top="1082" left="520" width="226" height="10" font="20"><a href="http://spatialanalysis.co.uk/2012/02/great-maps-ggplot2/">http://spatialanalysis.co.uk/2012/02/</a></text>
<text top="1096" left="149" width="117" height="10" font="20"><a href="http://spatialanalysis.co.uk/2012/02/great-maps-ggplot2/">great-maps-ggplot2/</a></text>
<text top="1096" left="266" width="3" height="12" font="1"><a href="http://spatialanalysis.co.uk/2012/02/great-maps-ggplot2/">.</a></text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="16" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">159</text>
<text top="181" left="149" width="206" height="13" font="10"># get an example shape file</text>
<text top="199" left="149" width="594" height="13" font="10">download.file(’http://www.census.gov/geo/cob/bdy/tr/tr00shp/tr48_d00_shp.zip’,</text>
<text top="217" left="164" width="183" height="13" font="10">destfile = ’census.zip’)</text>
<text top="253" left="149" width="175" height="13" font="10"># unzip, and load tools</text>
<text top="271" left="149" width="526" height="13" font="10">unzip(’census.zip’); library(maptools); library(gpclib); library(sp);</text>
<text top="289" left="149" width="107" height="13" font="10">gpclibPermit()</text>
<text top="325" left="149" width="137" height="13" font="10"># read data into R</text>
<text top="343" left="149" width="343" height="13" font="10">shapefile &lt;- readShapeSpatial(’tr48_d00.shp’,</text>
<text top="361" left="164" width="366" height="13" font="10">proj4string = CRS(&#34;+proj=longlat +datum=WGS84&#34;))</text>
<text top="397" left="149" width="465" height="13" font="10"># convert to a data.frame for use with ggplot2/ggmap and plot</text>
<text top="415" left="149" width="198" height="13" font="10">data &lt;- fortify(shapefile)</text>
<text top="432" left="149" width="366" height="13" font="10">qmap(’texas’, zoom = 6, maptype = ’satellite’) +</text>
<text top="450" left="164" width="488" height="13" font="10">geom_polygon(aes(x = long, y = lat, group = group), data = data,</text>
<text top="468" left="179" width="427" height="13" font="10">colour = ’white’, fill = ’black’, alpha = .4, size = .3)</text>
<text top="1059" left="205" width="60" height="13" font="3"><b>Figure 13:</b></text>
<text top="1058" left="269" width="419" height="13" font="4">Plotting shape files – Census tracts in Texas from the 2000 U.S. Census.</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="17" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">160</text>
<text top="100" left="149" width="270" height="17" font="5"><b>Conclusion and future directions</b></text>
<text top="139" left="149" width="598" height="13" font="4">Building on top of <b>ggplot2</b>, <b>ggmap </b>provides several new useful tools for visualizing spatial data.</text>
<text top="155" left="148" width="596" height="13" font="4">Theoretically speaking, the layered grammar of graphics attempts to enforce plotting consistency and</text>
<text top="172" left="149" width="595" height="13" font="4">therefore good plotting practice. Practically speaking, building <b>ggmap </b>on <b>ggplot2 </b>makes the result</text>
<text top="188" left="149" width="439" height="13" font="4">even better as the full range of <b>ggplot2 </b>capabilities can be brought to bear.</text>
<text top="209" left="171" width="415" height="13" font="4">There are a number of future directions in store for <b>ggmap</b>. The new</text>
<text top="209" left="590" width="37" height="13" font="6"><a href="http://CRAN.R-project.org/package=osmar"><b>osmar</b></a></text>
<text top="209" left="631" width="113" height="13" font="4">package integrates</text>
<text top="226" left="149" width="595" height="13" font="4">R and the OpenStreetMap data structures with which OpenStreetMap maps, Stamen Maps, and</text>
<text top="242" left="149" width="595" height="13" font="4">CloudMade Maps are rendered, thereby opening a floodgate of possibilities for plotting geographic</text>
<text top="258" left="149" width="413" height="13" font="4">objects on top of maps or satellite imagery all within R using <b>ggmap </b><a href="2013-1-kahle-wickham.html#17">(</a></text>
<text top="258" left="562" width="143" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">Eugster and Schlesinger</a></text>
<text top="258" left="705" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">,</a></text>
<text top="258" left="712" width="27" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">2013</a></text>
<text top="258" left="739" width="8" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">).</a></text>
<text top="275" left="148" width="596" height="13" font="4">Alternatively, integration with other spatial packages in R could provide several incredibly useful</text>
<text top="291" left="148" width="596" height="13" font="4">practical tools for spatial data analysis. Finally, the Google Elevation API and Places API provide</text>
<text top="308" left="149" width="595" height="13" font="4">additional interesting frontiers which can be incorporated into the <b>ggmap </b>framework just like the</text>
<text top="324" left="149" width="577" height="13" font="4">other Google APIs to give users additional capabilities though freely available geographical data.</text>
<text top="369" left="149" width="146" height="17" font="5"><b>Acknowledgment</b></text>
<text top="408" left="148" width="419" height="13" font="4">The authors would like to thank Jean-Olivier Irisson for his comments.</text>
<text top="453" left="149" width="109" height="17" font="5"><b>Bibliography</b></text>
<text top="491" left="149" width="596" height="13" font="4">R. A. Becker, A. R. Wilks, R. Brownrigg, and T. P. Minka. maps: Draw Geographical Maps, 2013. URL</text>
<text top="508" left="164" width="261" height="11" font="7"><a href="http://CRAN.R-project.org/package=maps">http://CRAN.R-project.org/package=maps</a></text>
<text top="508" left="425" width="169" height="13" font="4"><a href="http://CRAN.R-project.org/package=maps">. </a>R package version 2.3-2. <a href="2013-1-kahle-wickham.html#2">[p</a></text>
<text top="508" left="594" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#2">145</a></text>
<text top="508" left="614" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#2">]</a></text>
<text top="536" left="149" width="596" height="13" font="4">R. Bivand and N. Lewin-Koh. maptools: Tools for Reading and Handling Spatial Objects, 2013. URL</text>
<text top="553" left="164" width="289" height="11" font="7"><a href="http://CRAN.R-project.org/package=maptools">http://CRAN.R-project.org/package=maptools</a></text>
<text top="553" left="453" width="176" height="13" font="4"><a href="http://CRAN.R-project.org/package=maptools">. </a>R package version 0.8-23. <a href="2013-1-kahle-wickham.html#2">[p</a></text>
<text top="553" left="628" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#2">145</a></text>
<text top="553" left="649" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#2">]</a></text>
<text top="581" left="149" width="597" height="13" font="4">R. S. Bivand, E. J. Pebesma, and V. G. Rubio. Applied Spatial Data: Analysis with R. Springer, New York,</text>
<text top="598" left="164" width="63" height="13" font="4">2008. URL</text>
<text top="598" left="230" width="179" height="11" font="7"><a href="http://www.asdar-book.org/">http://www.asdar-book.org/</a></text>
<text top="598" left="409" width="21" height="13" font="4"><a href="http://www.asdar-book.org/">. </a><a href="2013-1-kahle-wickham.html#1">[p</a></text>
<text top="598" left="430" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#1">144</a></text>
<text top="598" left="450" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#1">]</a></text>
<text top="626" left="149" width="258" height="13" font="4">A. Couture-Beil. rjson: JSON for R, 2013. URL</text>
<text top="627" left="410" width="268" height="11" font="7"><a href="http://CRAN.R-project.org/package=rjson">http://CRAN.R-project.org/package=rjson</a></text>
<text top="626" left="678" width="66" height="13" font="4"><a href="http://CRAN.R-project.org/package=rjson">. </a>R package</text>
<text top="642" left="163" width="102" height="13" font="4">version 0.2.12. <a href="2013-1-kahle-wickham.html#13">[p</a></text>
<text top="642" left="265" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#13">156</a></text>
<text top="642" left="285" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#13">]</a></text>
<text top="671" left="149" width="555" height="13" font="4">M. J. A. Eugster and T. Schlesinger. osmar: Openstreetmap and R. The R Journal, 5(1), 2013. <a href="2013-1-kahle-wickham.html#17">[p</a></text>
<text top="671" left="704" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#17">160</a></text>
<text top="671" left="724" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#17">]</a></text>
<text top="699" left="149" width="598" height="13" font="4">I. Fellows, A. Rickett, and N. Fultz. DeducerSpatial: A Deducer Plug-in for Spatial Data Analysis, 2013.</text>
<text top="716" left="164" width="28" height="13" font="4">URL</text>
<text top="716" left="195" width="330" height="11" font="7"><a href="http://CRAN.R-project.org/package=DeducerSpatial">http://CRAN.R-project.org/package=DeducerSpatial</a></text>
<text top="716" left="525" width="158" height="13" font="4"><a href="http://CRAN.R-project.org/package=DeducerSpatial">. </a>R package version 0.6. <a href="2013-1-kahle-wickham.html#2">[p</a></text>
<text top="716" left="683" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#2">145</a></text>
<text top="716" left="703" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#2">]</a></text>
<text top="744" left="149" width="597" height="13" font="4">M. Loecher and Berlin School of Economics and Law. RgoogleMaps: Overlays on Google Map Tiles in R,</text>
<text top="760" left="164" width="63" height="13" font="4">2013. URL</text>
<text top="761" left="230" width="309" height="11" font="7"><a href="http://CRAN.R-project.org/package=RgoogleMaps">http://CRAN.R-project.org/package=RgoogleMaps</a></text>
<text top="760" left="539" width="178" height="13" font="4"><a href="http://CRAN.R-project.org/package=RgoogleMaps">. </a>R package version 1.2.0.3. <a href="2013-1-kahle-wickham.html#1">[p</a></text>
<text top="760" left="717" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#1">144</a></text>
<text top="760" left="738" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#1">]</a></text>
<text top="789" left="149" width="596" height="13" font="4">E. J. Pebesma and R. S. Bivand. Classes and methods for spatial data in R. R News, 5(2), 2006. URL</text>
<text top="806" left="164" width="248" height="11" font="7"><a href="http://cran.r-project.org/doc/Rnews/">http://cran.r-project.org/doc/Rnews/</a></text>
<text top="805" left="411" width="21" height="13" font="4"><a href="http://cran.r-project.org/doc/Rnews/">. </a><a href="2013-1-kahle-wickham.html#1">[p</a></text>
<text top="805" left="432" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#1">144</a></text>
<text top="805" left="452" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#1">]</a></text>
<text top="834" left="149" width="596" height="13" font="4">U.S. Census Bureau, Geography Division, Cartographic Products Management Branch. Census 2000:</text>
<text top="850" left="163" width="301" height="14" font="4">Census Tract Cartographic Boundary Files, 2001. URL</text>
<text top="851" left="468" width="281" height="11" font="7"><a href="http://www.census.gov/geo/www/cob/tr2000.html">http://www.census.gov/geo/www/cob/tr2000.</a></text>
<text top="867" left="164" width="27" height="11" font="7"><a href="http://www.census.gov/geo/www/cob/tr2000.html">html</a></text>
<text top="867" left="191" width="21" height="13" font="4"><a href="http://www.census.gov/geo/www/cob/tr2000.html">. </a><a href="2013-1-kahle-wickham.html#15">[p</a></text>
<text top="867" left="212" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#15">158</a></text>
<text top="867" left="232" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#15">]</a></text>
<text top="895" left="149" width="560" height="13" font="4">H. Wickham. ggplot2: Elegant Graphics for Data Analysis. Springer, New York, 2009. URL</text>
<text top="895" left="713" width="34" height="11" font="7"><a href="http://had.co.nz/ggplot2/book">http:</a></text>
<text top="912" left="163" width="165" height="11" font="7"><a href="http://had.co.nz/ggplot2/book">//had.co.nz/ggplot2/book</a></text>
<text top="911" left="328" width="21" height="13" font="4"><a href="http://had.co.nz/ggplot2/book">. </a><a href="2013-1-kahle-wickham.html#1">[p</a></text>
<text top="911" left="348" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#1">144</a></text>
<text top="911" left="369" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#1">]</a></text>
<text top="940" left="149" width="597" height="13" font="4">H. Wickham. A layered grammar of graphics. Journal of Computational and Graphical Statistics, 19(1):</text>
<text top="956" left="164" width="81" height="13" font="4">3–28, 2010. <a href="2013-1-kahle-wickham.html#1">[p</a></text>
<text top="956" left="245" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#1">144</a></text>
<text top="956" left="265" width="3" height="13" font="4"><a href="2013-1-kahle-wickham.html#1">,</a></text>
<text top="956" left="272" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#2">145</a></text>
<text top="956" left="292" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#2">]</a></text>
<text top="985" left="149" width="597" height="13" font="4">H. Wickham. The split-apply-combine strategy for data analysis. Journal of Statistical Software, 40(1):</text>
<text top="1001" left="163" width="96" height="13" font="4">1–29, 2011. URL</text>
<text top="1002" left="263" width="226" height="11" font="7"><a href="http://www.jstatsoft.org/v40/i01/">http://www.jstatsoft.org/v40/i01/</a></text>
<text top="1001" left="489" width="21" height="13" font="4"><a href="http://www.jstatsoft.org/v40/i01/">. </a><a href="2013-1-kahle-wickham.html#8">[p</a></text>
<text top="1001" left="510" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#8">151</a></text>
<text top="1001" left="530" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#8">]</a></text>
<text top="1029" left="149" width="405" height="13" font="4">L. Wilkinson. The Grammar of Graphics. Springer, New York, 2005. <a href="2013-1-kahle-wickham.html#2">[p</a></text>
<text top="1029" left="554" width="20" height="13" font="7"><a href="2013-1-kahle-wickham.html#2">145</a></text>
<text top="1029" left="574" width="4" height="13" font="4"><a href="2013-1-kahle-wickham.html#2">]</a></text>
<text top="1076" left="148" width="68" height="13" font="4">David Kahle</text>
<text top="1092" left="148" width="98" height="13" font="4">Baylor University</text>
<text top="1109" left="148" width="180" height="13" font="4">Department of Statistical Science</text>
<text top="1125" left="148" width="127" height="13" font="4">One Bear Place #97140</text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
<page number="18" position="absolute" top="0" left="0" height="1262" width="892">
<text top="44" left="64" width="11" height="15" font="0">C</text>
<text top="47" left="75" width="86" height="12" font="1">ONTRIBUTED</text>
<text top="44" left="166" width="10" height="15" font="0">R</text>
<text top="47" left="177" width="61" height="12" font="1">ESEARCH</text>
<text top="44" left="242" width="12" height="15" font="0">A</text>
<text top="47" left="254" width="53" height="12" font="1">RTICLES</text>
<text top="44" left="807" width="22" height="15" font="0">161</text>
<text top="103" left="148" width="91" height="13" font="4">Waco, TX 77005</text>
<text top="120" left="149" width="151" height="11" font="7"><a href="mailto:david_kahle@baylor.edu">david_kahle@baylor.edu</a></text>
<text top="157" left="148" width="93" height="13" font="4">Hadley Wickham</text>
<text top="173" left="148" width="86" height="13" font="4">Rice University</text>
<text top="190" left="148" width="183" height="13" font="4">Department of Statistics, MS 138</text>
<text top="206" left="149" width="79" height="13" font="4">6100 Main St.</text>
<text top="223" left="148" width="109" height="13" font="4">Houston, TX 77005</text>
<text top="240" left="149" width="103" height="11" font="7"><a href="mailto:hadley@rice.edu">hadley@rice.edu</a></text>
<text top="1210" left="148" width="186" height="15" font="0">The R Journal Vol. 5/1, June</text>
<text top="1210" left="642" width="102" height="15" font="0">ISSN 2073-4859</text>
</page>
</pdf2xml>
